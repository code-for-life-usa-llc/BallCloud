(window._vfP=window._vfP||[]).push([[86],{1314:function(t,e,i){"use strict";i.r(e);var n=i(551);i.d(e,"Widget",function(){return n.a})},1322:function(t,e,i){"use strict";i.r(e);i(7),i(17),i(5);var n=i(3),s=i(0),r=i(2),a=i(397),o=i(118),c=i(68),u=i(19),l=i.n(u),f=i(815),d=i.n(f),h=i(45),p=(i(83),i(78),i(816),i(762)),v=i(415),m=i(822),g=i.n(m),b=(i(35),i(40),i(79),i(168),Object.freeze({DEFAULT:"vf-feed",PROFILE:"vf-profile",COMMUNITY:"vf-community",SETTINGS:"vf-settings",ACCOUNT:"vf-account"})),_=Object.values(b);Object.freeze([b.DEFAULT,b.PROFILE,b.COMMUNITY,b.SETTINGS]);var y=i(11),w=i(496),E=i(391),N=i(106),O=i(53);function C(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var $=Object(E.b)(v.a),T=l.a.extend({template:g.a,props:["activeTab","showSettings"],data:function(){return{settingsTabKey:b.SETTINGS}},computed:function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),n.forEach(function(e){C(t,e,i[e])})}return t}({},Object(O.c)({settings:s.yc}),{hideCommunity:function(){var t=!this.settings.enable_muting||Object(y.G)(this.$user()),e=this.settings.disable_email_notifications;return t&&e},tabs:function(){var t=[{name:b.DEFAULT,i18nKey:"navigation.feed",ariaLabel:this.$i18n("aria.navigation.feed"),classes:b.DEFAULT},{name:b.PROFILE,i18nKey:"navigation.profile",ariaLabel:this.$i18n("aria.navigation.profile"),classes:b.PROFILE},{name:b.COMMUNITY,i18nKey:"navigation.community",ariaLabel:this.$i18n("aria.navigation.community"),classes:b.COMMUNITY},{name:b.SETTINGS,ariaLabel:this.$i18n("aria.navigation.settings"),classes:b.SETTINGS}];return this.hideCommunity&&(t=t.filter(function(t){return t.name!==b.COMMUNITY})),this.showSettings||(t=t.filter(function(t){return t.name!==b.SETTINGS})),t},ariaLabels:function(){return{closeTray:this.$i18n("navigation.close"),settings:this.$i18n("navigation.settings")}},showActiveTab:function(){var t=this;return Boolean(this.tabs.find(function(e){return e.name===t.activeTab}))},settingsClasses:function(){return{"vf-hidden":!Object(y.E)(this.$user()),"vf-tray-settings-button":!0}},navigationClasses:function(){return{"vf-tray-navigation--sticky":0===N.d}}}),methods:{closeTray:function(){this.$publish(r.z.CHANNEL,r.z.EVENTS.CLOSE)},onTabChange:function(t){var e=this;setTimeout(function(){return e.$publish(r.A.CHANNEL,r.A.EVENTS.CHANGE,t)},10)}},components:{vfTabbedNavigation:w.a,vfCloseButton:$,vfCogIcon:p.a}}),x=i(835),k=i.n(x),S=(i(836),i(837)),I=i.n(S),A=i(1),L=i(838),U=i.n(L),P=i(839),j=i.n(P),M=i(840),D=i.n(M),H=i(87);var z=Object(E.b)(v.a),F=l.a.extend({props:["alert"],template:I.a,data:function(){return{showCloseButton:!0}},methods:{onCloseAlertClick:function(){var t=this.$store.getters[s.cb];this.$store.commit(A.Jb,{key:t,items:[{key:this.alert.key}]})}},components:{vfCloseIcon:v.a}}),B=function(t,e){return F.extend({computed:{classes:function(){var e,i,n,s=(e={},i=function(t){switch(t){case"vf-alert-status-approved":return"vf-success-bg-colour";case"vf-alert-status-rejected":case H.REJECTED:return"vf-warning-bg-colour";case"vf-alert-status-information":case H.PENDING_NEW:case H.PENDING_UPDATE:return"vf-info-bg-colour";default:return""}}(this.alert.status||t),n=!0,i in e?Object.defineProperty(e,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[i]=n,e);return s},statusIcon:function(){switch(this.alert.status){case H.REJECTED:return j.a;case H.PENDING_NEW:case H.PENDING_UPDATE:return D.a;default:return this.alert.icon||e}}},components:{vfCloseButton:z}})},R={approved:B("vf-alert-status-approved",U.a),rejected:B("vf-alert-status-rejected",j.a),information:B("vf-alert-status-information",D.a)},V=B("","").extend({data:function(){return{showCloseButton:!1}},methods:{onCloseAlertClick:function(){}}}),G=i(439),q=l.a.extend({template:k.a,inject:["settings"],computed:{user:function(){return this.$store.getters[s.bb]},type:function(){return Object(G.b)(this.user,this.settings)?"email":Object(G.d)(this.user,this.settings)?"username":Object(G.a)(this.user,this.settings)?"avatar":""},displayModeration:function(){return""!==this.type},isEmailVerification:function(){return"email"===this.type},moderationStatus:function(){var t=this.type;return t?this.isEmailVerification?this.$user()["".concat(t,"_verification_status")]:this.$user()["".concat(t,"_moderation_status")]:H.NONE},moderationMessage:function(){return this.type&&!Object(y.H)(this.moderationStatus)?"moderation.".concat(this.type,"_").concat(this.moderationStatus):""},alert:function(){return{status:this.moderationStatus,i18nKey:this.moderationMessage}},classes:function(){return{"vf-warning":this.moderationStatus===H.REJECTED}}},components:{"vf-moderation-alert":V}}),K=i(195),Y=i(21),W=l.a.extend({data:function(){return{}}}),J=(i(9),i(28),i(197),i(75),i(105),i(393)),X=i(188),Z={props:{status:{type:String,required:!0},clickable:{type:Boolean,default:!1},dotPalette:{type:String,default:J.a.ACCENT}},computed:{isNew:function(){return this.status===Y.c},isSeen:function(){return this.status===Y.e},isRead:function(){return this.status===Y.d},classes:function(){return{"vf-notification":!0,"vf-notification--seen":!this.isNew,"vf-notification--read":this.isRead,"vf-notification--unread":this.isNew||this.isSeen,"vf-clickable":this.clickable}},statusClass:function(){return{"vf-notification-status--accent":this.isNew&&this.dotPalette===J.a.ACCENT,"vf-notification-status--mention":this.isNew&&this.dotPalette===J.a.MENTION}}}},Q=(i(841),i(93)),tt=Object(Q.a)(Z,function(){var t=this.$createElement,e=this._self._c||t;return e("li",{class:this.classes},[e("div",{staticClass:"vf-notification-status",class:this.statusClass},[e("span",{staticClass:"vf-offscreen-text"},[this._v("\n            "+this._s(this.$i18n("aria.feed.notifications.new"))+"\n        ")])]),this._v(" "),this._t("default")],2)},[],!1,null,"4d173204",null).exports,et=i(402),it=(i(842),i(843)),nt=i.n(it),st=l.a.extend({template:nt.a,props:{tag:{type:String,default:"div"}}}),rt=i(413),at=i(485),ot=i(500),ct=Object(E.b)(ot.a),ut={props:{user:Object,timestamp:Number},computed:{avatarProps:function(){return{user:this.user,current_user_uuid:this.$store.getters[s.cb],size:et.a.SMALL,isClickable:!0}}},methods:{onAvatarClick:function(){this.$publish(r.A.CHANNEL,r.A.EVENTS.CHANGE,b.PROFILE,{user_uuid:this.user.uuid})}},components:{vfRecord:st,vfAvatar:rt.a,vfTimestamp:at.a,deleteButton:ct}},lt=(i(853),Object(Q.a)(ut,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("vf-record",t._b({scopedSlots:t._u([{key:"identifier",fn:function(){return[t._t("identifier",[i("vf-avatar",t._b({nativeOn:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.onAvatarClick(e)}}},"vf-avatar",t.avatarProps,!1))])]},proxy:!0},{key:"content",fn:function(){return[t._t("content")]},proxy:!0},{key:"action",fn:function(){return[t._t("content-right"),t._v(" "),t._t("action",[i("delete-button",{staticClass:"vf-delete-icon",attrs:{text:""},nativeOn:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.$emit("delete")}}})])]},proxy:!0},{key:"timestamp",fn:function(){return[i("vf-timestamp",{attrs:{timestamp:t.timestamp}})]},proxy:!0}],null,!0)},"vf-record",t.$attrs,!1))},[],!1,null,"3a09b0af",null).exports),ft=i(803);function dt(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var ht={props:{user:{type:Object,required:!0},hasComma:{type:Boolean,default:!1}},computed:function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),n.forEach(function(e){dt(t,e,i[e])})}return t}({},Object(O.c)({isAuthor:s.Vb}),{badgeProps:function(){return{name:this.user.name,isAuthor:this.isAuthor(this.user.uuid),isTrustedUser:this.$can("trust","user",this.user),isModerator:this.$can("moderate","comment",this.user)}}}),components:{userBadge:ft.a}},pt=(i(859),Object(Q.a)(ht,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",[t._v("\n    "+t._s(t.user.name)),i("user-badge",t._b({staticClass:"vf-user-badge"},"user-badge",t.badgeProps,!1)),t.hasComma?[t._v(",")]:t._e()],2)},[],!1,null,"17159e85",null).exports),vt={props:{users:{type:Array,required:!0}},beforeCreate:function(){this.maxNamesToShow=2},computed:{numUsers:function(){return this.users.length},numOtherUsers:function(){return this.numUsers-this.maxNamesToShow},hasOtherUsers:function(){return this.numOtherUsers>0}},components:{userWithComma:pt}},mt=Object(Q.a)(vt,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("em",[i("user-with-comma",{attrs:{user:t.users[0],"has-comma":t.numUsers>1}}),t._v(" "),t.numUsers>1?[t.numUsers===t.maxNamesToShow?[t._v("\n            "+t._s(t.$i18n("feed.notifications.common.and"))+"\n        ")]:t._e(),t._v(" "),i("user-with-comma",{attrs:{user:t.users[1],"has-comma":t.numUsers>t.maxNamesToShow}})]:t._e(),t._v(" "),t.hasOtherUsers?[t._v("\n        "+t._s(t.$i18n("feed.notifications.common.others",{num:t.numOtherUsers}))+"\n    ")]:t._e()],2)},[],!1,null,null,null).exports,gt={props:{users:{type:Array,required:!0}},components:{usersAndOthers:mt}},bt=Object(Q.a)(gt,function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("users-and-others",{attrs:{users:this.users}}),this._v(" "),this._t("default")],2)},[],!1,null,null,null).exports,_t={props:{user:{type:Object,required:!0}},components:{userWithComma:pt}},yt=Object(Q.a)(_t,function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("em",[e("user-with-comma",{attrs:{user:this.user}}),this._v(" "),this._t("user-right"),this._v(" â€”\n    ")],2),this._v(" "),this._t("default")],2)},[],!1,null,null,null).exports;function wt(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Et={data:function(){return{hasImageError:!1}},props:{uuid:{type:Number,required:!0},section:{type:String,required:!0},unmutedActors:{type:Array,required:!0}},beforeCreate:function(){this.MENTION_PALETTE=J.a.MENTION},computed:function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),n.forEach(function(e){wt(t,e,i[e])})}return t}({},Object(O.c)({getUser:s.Yc,getStatus:s.e,getTimestamp:s.d,getContent:s.M,getNotifications:s.ec,isNotificationVisible:s.Mb}),{notifications:function(){var t=this;return this.getNotifications(this.uuid).filter(function(e){var i=e.notification_uuid;return t.isNotificationVisible(i)})},actorUuids:function(){return Array.from(new Set(this.notifications.map(function(t){return t.actor_uuid})))},users:function(){return this.actorUuids.map(this.getUser.bind(this))},hasImage:function(){return this.imageUrl&&!this.hasImageError},pageTitle:function(){return this.representativeContent.metadata.origin_title},pageUrl:function(){var t=this.representativeContent.metadata.origin_url,e=this.representativeContent.content_uuid;if(!t)return"#";var i=new URL(t);return i.hash="vf-".concat(e),i.searchParams.append("__vfz","medium=tray_notification"),i.href},imageUrl:function(){return this.representativeContent.metadata.origin_image_url},imageAlt:function(){return this.representativeContent.metadata.origin_summary},firstUser:function(){return this.users[0]},representativeContent:function(){return this.getContent(this.notifications[this.notifications.length-1].content_uuid)},singleReplyText:function(){return Object(X.b)(this.representativeContent.content,100)}}),methods:{onImageError:function(){this.hasImageError=!0},deleteSelf:function(){return this.$store.dispatch(n.w,this.uuid)},onClick:function(){var t=this;this.$store.dispatch(n.Pb,this.uuid).then(function(){window.location.href=t.pageUrl})}},components:{contentMany:bt,contentSingle:yt,notificationRecord:lt,notificationListItem:tt}},Nt=Object(Q.a)(Et,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"fade"}},[i("notification-list-item",{attrs:{status:t.getStatus(t.uuid),"dot-palette":t.MENTION_PALETTE}},[i("notification-record",{staticClass:"feed link",attrs:{tag:"a",href:t.pageUrl,timestamp:t.getTimestamp(t.uuid),user:t.firstUser},on:{delete:t.deleteSelf},nativeOn:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.onClick(e)}},scopedSlots:t._u([{key:"content",fn:function(){return[1===t.users.length?i("content-single",{attrs:{user:t.firstUser},scopedSlots:t._u([{key:"user-right",fn:function(){return[t._v("\n                        "+t._s(t.$i18n("feed.notifications.mentions.single"))+"\n                    ")]},proxy:!0}],null,!1,4263774982)},[t._v("\n                    "+t._s(t.singleReplyText)+"\n                ")]):i("content-many",{attrs:{users:t.users,"page-title":t.pageTitle}},[t._v("\n                    "+t._s(t.$i18n("feed.notifications.mentions.many",{num:t.users.length,pageTitle:t.pageTitle}))+"\n                ")])]},proxy:!0},{key:"content-right",fn:function(){return[t.hasImage?i("img",{staticClass:"vf-image vf-image-medium vf-article-thumbnail",attrs:{src:t.imageUrl,alt:t.imageAlt},on:{error:t.onImageError}}):t._e()]},proxy:!0}])})],1)],1)},[],!1,null,null,null).exports;function Ot(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Ct={data:function(){return{hasImageError:!1}},props:{uuid:{type:Number,required:!0},section:{type:String,required:!0},unmutedActors:{type:Array,required:!0}},computed:function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),n.forEach(function(e){Ot(t,e,i[e])})}return t}({},Object(O.c)({getContent:s.M,getUser:s.Yc,getStatus:s.e,getTimestamp:s.d,getNotifications:s.ec,isNotificationVisible:s.Mb}),{notifications:function(){var t=this;return this.getNotifications(this.uuid).filter(function(e){var i=e.notification_uuid;return t.isNotificationVisible(i)})},actorUuids:function(){return Array.from(new Set(this.notifications.map(function(t){return t.actor_uuid})))},users:function(){return this.actorUuids.map(this.getUser.bind(this))},hasImage:function(){return this.imageUrl&&!this.hasImageError},pageTitle:function(){return this.representativeContent.metadata.origin_title},pageUrl:function(){var t=this.representativeContent.metadata.origin_url,e=this.representativeContent.content_uuid;if(!t)return"#";var i=new URL(t);return i.hash="vf-".concat(e),i.searchParams.append("__vfz","medium=tray_notification"),i.href},imageUrl:function(){return this.representativeContent.metadata.origin_image_url},imageAlt:function(){return this.representativeContent.metadata.origin_summary},firstUser:function(){return this.users[0]},likeText:function(){return this.$i18n("feed.notifications.likes.generic",{num:this.users.length,pageTitle:this.pageTitle})},representativeContent:function(){return this.getContent(this.notifications[this.notifications.length-1].content_uuid)}}),methods:{onImageError:function(){this.hasImageError=!0},deleteSelf:function(){return this.$store.dispatch(n.w,this.uuid)},onClick:function(){var t=this;this.$store.dispatch(n.Pb,this.uuid).then(function(){window.location.href=t.pageUrl})}},components:{contentMany:bt,contentSingle:yt,notificationRecord:lt,notificationListItem:tt}},$t=Object(Q.a)(Ct,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"fade"}},[i("notification-list-item",{attrs:{status:t.getStatus(t.uuid)}},[i("notification-record",{staticClass:"feed link",attrs:{tag:"a",href:t.pageUrl,timestamp:t.getTimestamp(t.uuid),user:t.firstUser},on:{delete:t.deleteSelf},nativeOn:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.onClick(e)}},scopedSlots:t._u([{key:"content",fn:function(){return[1===t.users.length?i("content-single",{attrs:{user:t.firstUser}},[t._v("\n                    "+t._s(t.likeText)+"\n                ")]):i("content-many",{attrs:{users:t.users}},[t._v("\n                    "+t._s(t.$i18n("feed.notifications.likes.generic",{num:t.users.length,pageTitle:t.pageTitle}))+"\n                ")])]},proxy:!0},{key:"content-right",fn:function(){return[t.hasImage?i("img",{staticClass:"vf-image vf-image-medium vf-article-thumbnail",attrs:{src:t.imageUrl,alt:t.imageAlt},on:{error:t.onImageError}}):t._e()]},proxy:!0}])})],1)],1)},[],!1,null,null,null).exports;function Tt(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var xt={data:function(){return{hasImageError:!1}},props:{uuid:{type:Number,required:!0},section:{type:String,required:!0},unmutedActors:{type:Array,required:!0}},computed:function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),n.forEach(function(e){Tt(t,e,i[e])})}return t}({},Object(O.c)({getUser:s.Yc,getStatus:s.e,getTimestamp:s.d,getContent:s.M,getNotifications:s.ec,isNotificationVisible:s.Mb}),{notifications:function(){var t=this;return this.getNotifications(this.uuid).filter(function(e){var i=e.notification_uuid;return t.isNotificationVisible(i)})},actorUuids:function(){return Array.from(new Set(this.notifications.map(function(t){return t.actor_uuid})))},users:function(){return this.actorUuids.map(this.getUser.bind(this))},hasImage:function(){return this.imageUrl&&!this.hasImageError},pageTitle:function(){return this.representativeContent.metadata.origin_title},pageUrl:function(){var t=this.representativeContent.metadata.origin_url,e=this.notifications.length>1?this.representativeContent.target_uuid:this.representativeContent.content_uuid;if(!t)return"#";var i=new URL(t);return i.hash="vf-".concat(e),i.searchParams.append("__vfz","medium=tray_notification"),i.href},imageUrl:function(){return this.representativeContent.metadata.origin_image_url},imageAlt:function(){return this.representativeContent.metadata.origin_summary},firstUser:function(){return this.users[0]},representativeContent:function(){return this.getContent(this.notifications[this.notifications.length-1].content_uuid)},text:function(){return Object(X.b)(this.representativeContent.content,100)}}),methods:{onImageError:function(){this.hasImageError=!0},deleteSelf:function(){return this.$store.dispatch(n.w,this.uuid)},onClick:function(){var t=this;this.$store.dispatch(n.Pb,this.uuid).then(function(){window.location.href=t.pageUrl})}},components:{contentMany:bt,contentSingle:yt,notificationRecord:lt,notificationListItem:tt}},kt=Object(Q.a)(xt,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"fade"}},[i("notification-list-item",{attrs:{status:t.getStatus(t.uuid)}},[i("notification-record",{staticClass:"feed link",attrs:{tag:"a",href:t.pageUrl,timestamp:t.getTimestamp(t.uuid),user:t.firstUser},on:{delete:t.deleteSelf},nativeOn:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.onClick(e)}},scopedSlots:t._u([{key:"content",fn:function(){return[1===t.users.length?i("content-single",{attrs:{user:t.firstUser},scopedSlots:t._u([{key:"user-right",fn:function(){return[t._v("\n                        "+t._s(t.$i18n("feed.notifications.comments.single"))+"\n                    ")]},proxy:!0}],null,!1,2192930095)},[t._v("\n                    "+t._s(t.text)+"\n                ")]):i("content-many",{attrs:{users:t.users}},[t._v("\n                    "+t._s(t.$i18n("feed.notifications.comments.many",{num:t.users.length,pageTitle:t.pageTitle}))+"\n                ")])]},proxy:!0},{key:"content-right",fn:function(){return[t.hasImage?i("img",{staticClass:"vf-image vf-image-medium vf-article-thumbnail",attrs:{src:t.imageUrl,alt:t.imageAlt},on:{error:t.onImageError}}):t._e()]},proxy:!0}])})],1)],1)},[],!1,null,null,null).exports,St=i(37),It=i(860),At=i.n(It),Lt=i(407),Ut=Lt.a.extend({data:function(){return{graphics:At.a}}}),Pt=i(411),jt=[Y.b.INITIAL,Y.b.BROADCAST],Mt={props:{uuid:{type:[String,Number],required:!0},user:{type:Object}},computed:{notification:function(){return this.$store.getters[s.hc](this.uuid)},showNewsFeedIcon:function(){return this.isNonUserNotification&&!this.user.pic_large&&!this.user.pic_small},isNonUserNotification:function(){return jt.includes(this.notification.notification_type)},avatarProps:function(){return{user:this.user,size:et.a.SMALL,isClickable:!this.isNonUserNotification}}},components:{frontAvatar:Pt.a,vfNewsfeedIcon:Ut}},Dt=(i(861),Object(Q.a)(Mt,function(){var t=this.$createElement,e=this._self._c||t;return this.showNewsFeedIcon?e("vf-newsfeed-icon",{staticClass:"vf-image-small"}):e("front-avatar",this._b({staticClass:"vf-notification-avatar"},"front-avatar",this.avatarProps,!1))},[],!1,null,"6185f134",null).exports),Ht=i(862),zt=i.n(Ht),Ft=Lt.a.extend({data:function(){return{graphics:zt.a}}}),Bt=i(576),Rt=i(865),Vt=i.n(Rt),Gt=Lt.a.extend({props:{size:{type:String,default:"medium"}},data:function(){return{graphics:Vt.a}},computed:{getClasses:function(){return"vf-icon vf-icon-trusted vf-icon-".concat(this.size)}}}),qt=i(577),Kt=i(189),Yt=function(t,e){return Object.freeze({status:t,i18nKey:e,key:Object(Kt.a)()})},Wt=i(160),Jt=(i(866),l.a.extend({props:["uuid","section","unmutedActors"],data:function(){var t=this.$store.getters[s.hc](this.uuid);return{notification:t,content:t.content_uuid&&this.$store.getters[s.lc]({uuid:t.content_uuid})}},computed:{currentUserUuid:function(){return this.$store.getters[s.cb]},actorUuidList:function(){var t=this;switch(this.notification.notification_type){case Y.b.COMMENT:case Y.b.FOLLOW:case Y.b.LIKE:case Y.b.REPLY:return this.notification.actor_uuid_list.filter(function(e){var i=t.$store.getters[s.Yc](e);return!i||i.name});default:return this.notification.actor_uuid_list}},type:function(){return this.notification.notification_type},timestamp:function(){return this.notification.date_modified_max},status:function(){return this.notification.read_status},read:function(){return this.notification.read_status===Y.d},clickable:function(){switch(this.notification.notification_type){case Y.b.INITIAL:return!1;case Y.b.FOLLOW:return this.unmutedActors.length>1;default:return!0}},users:function(){var t=this.unmutedActors;if(!t.length)return[];var e=t[0];return[this.getUser(e)]},text:function(){var t="feed.notifications.".concat(this.notification.notification_type);if("broadcast"===this.type)return"<strong>".concat(this.model.title,"</strong>");var e=this.unmutedActors;if(!e.length)return"";var i=e[0],n=this.getUser(i),s={user:n.name,topic_name:this.content&&this.content.topic_name,num:e.length-1};if(e.length<=2){var r=" ".concat(this.trustedIconHTML),a=" ".concat(this.moderatorIconHTML);if(this.$can("trust","user",n)?s.user+=r:this.$can("moderate","comment",n)&&(s.user+=a),2===e.length){var o=this.getUser(e[1]);s.secondUser=o.name,this.$can("trust","user",o)?s.secondUser+=r:this.$can("moderate","comment",o)&&(s.secondUser+=a)}}return this.$i18n(t,s)},trustedIconHTML:function(){var t=new Gt;return t.$mount(),t.$el.outerHTML},moderatorIconHTML:function(){return Object(qt.a)(this.$i18n("badges.moderator"))},topicType:function(){return(this.$store.getters[s.Pc](this.model.topic_id)||{}).topic_type}},methods:{onClick:function(){var t=this;if(!this.read&&this.$user().uuid!==c.a){var e=this.uuids||[this.uuid];Promise.all(e.map(function(e){return Object(Wt.a)(e,t.$store)})).catch(function(){var e=t.$store.getters[s.cb],i=Yt(H.REJECTED,"feed.alerts.read");t.$store.commit(A.y,{key:e,items:[i]})})}switch(this.notification.notification_type){case Y.b.FOLLOW:this.unmutedActors.length>1&&this.$publish(r.A.CHANNEL,r.A.EVENTS.CHANGE,b.COMMUNITY)}},getUser:function(t){return this.$store.getters[s.Tb](t)?this.$store.getters[s.Yc](t):this.$store.getters[s.tc](t)}},components:{vfTopicIcon:Ft,vfAuthorIcon:Bt.a,notificationListItem:tt,notificationAvatar:Dt}})),Xt=i(36),Zt={extends:Jt,data:function(){return{hasImageError:!1}},computed:{user:function(){return this.users[0]},showNewsFeedIcon:function(){return this.isNonUserNotification&&!this.user.pic_large&&!this.user.pic_small},page:function(){return this.$store.getters[s.lc]({uuid:this.notification.content_uuid})},isNonUserNotification:function(){return this.notification.notification_type===Y.b.BROADCAST},model:function(){return Object(St.b)(this.page,{actor_uuid_list:this.actorUuidList})},shouldShowDeleteIcon:function(){return Object(y.E)(this.$user())},hasImage:function(){return this.model.image_url&&!this.hasImageError},titleOrDescription:function(){return"broadcast"===this.model.type?this.model.description:this.model.title},showTopicIcon:function(){return"topic"===this.topicType},showAuthorIcon:function(){return"author"===this.topicType},hasNonUserIcon:function(){return this.showTopicIcon||this.showAuthorIcon||this.showNewsFeedIcon}},methods:{onImageError:function(){this.hasImageError=!0},deleteNotification:function(){return this.$store.dispatch(n.B,this.uuid)},onClick:function(){var t=this;if(this.$user().uuid!==c.a){var e=this.uuids||[this.uuid];Promise.all(e.map(function(e){return Object(Wt.a)(e,t.$store)})).then(this.redirect).catch(this.redirect)}else this.redirect()},redirect:function(){var t=this.page.url;t!==window.location.pathname&&t!==window.location.href&&(t=this.page.full_page_url?Object(Xt.c)(this.page.full_page_url,{queryParams:{__vfz:"medium=tray_notification"}}):Object(Xt.b)(window.location.protocol,window.location.host,{path:t,queryParams:{__vfz:"medium=tray_notification"}})),this.notification.notification_type!==Y.b.COMMENT&&(t=Object(Xt.a)(t,this.notification.grouping_key.uuid)),this.$publish("window","redirect",t)},onNewsfeedIconClick:function(){this.isNonUserNotification||this.$publish(r.A.CHANNEL,r.A.EVENTS.CHANGE,b.PROFILE,{user_uuid:this.user.uuid})}},components:{vfNewsfeedIcon:Ut,notificationRecord:lt}},Qt=Object(Q.a)(Zt,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"fade"}},[i("notification-list-item",{attrs:{clickable:"",status:t.status}},[i("notification-record",{staticClass:"feed link",attrs:{tag:"a",href:t.page.url,timestamp:t.timestamp,user:t.user},on:{delete:t.deleteNotification},nativeOn:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.onClick(e)}},scopedSlots:t._u([t.hasNonUserIcon?{key:"identifier",fn:function(){return[t.showTopicIcon?i("vf-topic-icon",{staticClass:"vf-icon-large"}):t.showAuthorIcon?i("vf-author-icon",{staticClass:"vf-icon-large vf-icon-circle-outline"}):t.showNewsFeedIcon?i("vf-newsfeed-icon",{staticClass:"vf-image-small",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.onNewsfeedIconClick(e)}}}):t._e()]},proxy:!0}:null,{key:"content",fn:function(){return[i("p",{staticClass:"vf-secondary-text-colour",domProps:{innerHTML:t._s(t.text)}}),t._v(" "),i("p",{domProps:{innerHTML:t._s(t.titleOrDescription)}})]},proxy:!0},{key:"content-right",fn:function(){return[t.hasImage?i("img",{staticClass:"vf-image vf-image-medium vf-article-thumbnail",attrs:{src:t.model.image_url,alt:t.model.alt},on:{error:t.onImageError}}):t._e()]},proxy:!0}],null,!0)})],1)],1)},[],!1,null,null,null).exports,te={extends:Jt,methods:{isInitialNotificationDismissed:function(){return null!==window.localStorage.getItem("_vf_initial_notification_dismissed")}},components:{vfRecord:st,vfNewsfeedIcon:Ut}},ee=Object(Q.a)(te,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("notification-list-item",{directives:[{name:"show",rawName:"v-show",value:!t.isInitialNotificationDismissed(),expression:"!isInitialNotificationDismissed()"}],staticClass:"vf-initial-notification",attrs:{status:t.status}},[i("vf-record",{staticClass:"feed",scopedSlots:t._u([{key:"identifier",fn:function(){return[i("vf-newsfeed-icon",{staticClass:"vf-image-small"})]},proxy:!0},{key:"content",fn:function(){return[i("p",{domProps:{innerHTML:t._s(t.text)}})]},proxy:!0}])})],1)},[],!1,null,null,null).exports,ie={props:["model"],computed:{textKey:function(){return""},classes:function(){return{}}},components:{vfButton:E.a}},ne=Object(Q.a)(ie,function(){var t=this,e=t.$createElement;return(t._self._c||e)("vf-button",{staticClass:"vf-label vf-label-upper vf-tray-action-button",attrs:{"is-cta":"","is-inverted":"",size:"tiny",palette:"accent"},nativeOn:{click:function(e){return t.onClick(e)}}},[t._v("\n    "+t._s(t.$i18n(t.textKey))+"\n")])},[],!1,null,null,null).exports,se={extends:ne,computed:{user:function(){return this.$store.getters[s.Yc](this.model.uuid)},textKey:function(){return"user_actions.".concat(this.action)}},methods:{onClick:function(){var t=this,e=this.$store.getters[s.cb],i={follow:n.Bb,unfollow:n.Zc,mute:n.Vb,unmute:n.dd};return this.$store.dispatch(i[this.action],{uuid:this.user.uuid}).catch(function(){var i=Yt(H.REJECTED,"feed.alerts.".concat(t.action));t.$store.commit(A.y,{key:e,items:[i]})})}}},re={extends:se,computed:{isFollowed:function(){return Boolean(this.user.is_followed)},action:function(){return this.isFollowed?"unfollow":"follow"},classes:function(){return{"vf-complement-bg-colour":this.isFollowed,"vf-complement-colour":this.isFollowed}}}},ae={extends:se,computed:{isMuted:function(){return Boolean(this.user.is_muted)},action:function(){return this.isMuted?"unmute":"mute"},classes:function(){return{"vf-primary-bg-colour":this.isMuted,"vf-complement-bg-colour":!this.isMuted,"vf-complement-colour":!0}}}},oe={extends:Jt,computed:{shouldShowButton:function(){return 1===this.unmutedActors.length&&!this.users[0].is_followed},followers:function(){return this.unmutedActors}},methods:{deleteNotification:function(){return this.$store.dispatch(n.B,this.uuid)}},components:{notificationRecord:lt,vfTrayButton:re}},ce=(i(867),Object(Q.a)(oe,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"fade"}},[i("notification-list-item",{attrs:{status:t.status,clickable:this.unmutedActors.length>1},nativeOn:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.onClick(e)}}},[i("notification-record",{staticClass:"feed",attrs:{user:t.users[0],timestamp:t.timestamp},on:{delete:t.deleteNotification},scopedSlots:t._u([{key:"content",fn:function(){return[i("p",{domProps:{innerHTML:t._s(t.text)}})]},proxy:!0},{key:"content-right",fn:function(){return[t.shouldShowButton?i("vf-tray-button",{staticClass:"vf-follow-button",attrs:{model:t.users[0]}}):t._e()]},proxy:!0}])})],1),t._v(">\n")],1)},[],!1,null,"ad51ed18",null).exports),ue={extends:Qt,methods:{redirect:function(){window.location.href=this.page.full_page_url||this.page.url}}},le=i(868),fe=i.n(le),de=i(8);i(869);function he(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var pe=Object(E.b)(ot.a),ve={props:{type:{type:String,default:""},description:{type:String,default:""}},computed:{desc:function(){var t="author"===this.type?"author":"other";return this.$i18n("feed.notifications.".concat(t),{description:this.description})}},template:'<span v-html="desc"></span>'},me={props:{type:{type:String,default:""},description:{type:String,default:""}},template:'\n        <div>\n            <vf-author-icon v-if="type === \'author\'" class="vf-image-small"></vf-author-icon>\n            <vf-topic-icon v-else class="vf-image-small"></vf-topic-icon>\n        </div>\n    ',components:{vfTopicIcon:Ft,vfAuthorIcon:Bt.a}},ge={template:fe.a,props:{uuid:{type:String,required:!0}},data:function(){var t=this.$store.getters[s.hc](this.uuid);return{notification:t,content:t.content_uuid&&this.$store.getters[s.lc]({uuid:t.content_uuid}),hasImageError:!1}},computed:function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),n.forEach(function(e){he(t,e,i[e])})}return t}({},Object(O.c)({pageByUuid:s.lc,currentUserUuid:s.cb,topicById:s.Pc,isUserByUuid:s.Tb,userByUuid:s.Yc,siteByUuid:s.tc}),{page:function(){return this.pageByUuid({uuid:this.notification.content_uuid})},type:function(){return this.notification.notification_type},timestamp:function(){return this.notification.date_modified_max},read:function(){return this.notification.read_status===Y.d},users:function(){var t=this.notification.actor_uuid_list[0];return[this.getUser(t)]},classes:function(){return{"vf-primary-notification-bg-colour":this.read,"vf-secondary-notification-bg-colour":!this.read}},topic:function(){return this.topicById(this.page.topic_id)||{}},topicType:function(){return this.topic.topic_type},name:function(){return this.topic.topic_name},hasImage:function(){return Boolean(this.page.image_url)&&!this.hasImageError}}),methods:{onClick:function(){var t=this;if(this.$user().uuid!==c.a){var e=this.uuids||[this.uuid];Promise.all(e.map(function(e){return Object(Wt.a)(e,t.$store)})).then(this.redirect).catch(this.redirect)}else this.redirect()},onImageError:function(){this.hasImageError=!0},redirect:function(){var t=Object(Xt.h)(this.page.url)&&!Object(Xt.i)(this.page.url)?this.page.url:"https:".concat(this.page.url),e=new URL(t);e.searchParams.append("__vfz","medium=tray_notification"),this.notification.notification_type!==Y.b.COMMENT&&Object(de.e)(this.notification.grouping_key.uuid)&&(e.hash="vf-".concat(Object(de.g)(this.notification.grouping_key.uuid))),this.$publish("window","redirect",e.href)},getUser:function(t){return this.isUserByUuid(t)?this.userByUuid(t):this.siteByUuid(t)},deleteNotification:function(){return this.$store.dispatch(n.B,this.uuid)}},components:{topicIcon:me,topicDescription:ve,vfDeleteButton:pe,vfTimestamp:at.a,vfRecord:st}},be={props:["notifications","section"],methods:{getComponent:function(t){var e=t.type;if(t.service_type!==Y.f.LEGACY){switch(e){case Y.b.REPLY:return Nt;case Y.b.LIKE:return $t;case Y.b.CONTENT:return kt}return null}switch(e){case Y.b.INITIAL:return ee;case Y.b.TOPIC:return ge;case Y.b.BROADCAST:return ue;case Y.b.FOLLOW:return ce;case Y.b.REPLY:case Y.b.LIKE:case Y.b.COMMENT:return Qt}return null}}},_e=Object(Q.a)(be,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ol",t._l(t.notifications,function(e){return i(t.getComponent(e),{key:e.uuid,tag:"component",attrs:{uuid:e.uuid,section:t.section,"unmuted-actors":e.unmutedActors}})}),1)},[],!1,null,null,null).exports,ye=i(414),we={props:{header:{type:String},shouldShowClearButton:{type:Boolean,required:!0}},computed:{hasHeader:function(){return Boolean(this.header)},ariaLabel:function(){return this.$i18n("aria.feed.header.".concat(this.header))},text:function(){return this.$i18n("feed.header.".concat(this.header))}},components:{vfRecord:st,vfButton:ye.a,vfCloseIcon:v.a}},Ee=(i(870),Object(Q.a)(we,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("vf-record",{staticClass:"feed__header vf-tray-section-header vf-notification-section-header",scopedSlots:t._u([{key:"identifier",fn:function(){return[i("div",{directives:[{name:"show",rawName:"v-show",value:t.hasHeader,expression:"hasHeader"}],staticClass:"vf-label vf-label-upper feed__header__title",attrs:{"aria-label":t.ariaLabel}},[t._v("\n            "+t._s(t.text)+"\n        ")])]},proxy:!0},{key:"action",fn:function(){return[t.shouldShowClearButton?i("vf-button",{staticClass:"vf-clear-notification-section-button vf-flex vf-centered",nativeOn:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.$emit("clear")}}},[i("div",{staticClass:"vf-left vf-label vf-label-upper vf-clear-label"},[t._v("\n                "+t._s(t.$i18n("feed.notifications.clear"))+"\n            ")]),t._v(" "),i("vf-close-icon",{staticClass:"vf-icon-medium close-icon"})],1):t._e()]},proxy:!0}])})},[],!1,null,"6ab7a608",null).exports);function Ne(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),n.forEach(function(e){Oe(t,e,i[e])})}return t}function Oe(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Ce=[Y.b.TOPIC,Y.b.BROADCAST,Y.b.INITIAL],$e={props:{header:{type:String,required:!0},notifications:{type:Array,required:!0}},computed:Ne({},Object(O.c)({isMutedUser:s.ad,getUser:s.Yc,getLegacyNotificationByUuid:s.hc}),{hasNotifications:function(){return this.visibleNotifications.length>0},visibleNotifications:function(){var t=this;return this.notifications.map(function(e){return{uuid:e.uuid||e.notification_uuid,type:e.notification_type,service_type:e.service_type,section:t.section,unmutedActors:t.getUnmutedActors(e)}}).filter(function(t){return t.unmutedActors.length>0})},shouldShowClearButton:function(){return this.getCanBeDeletedNotificationsList().length>0&&Object(y.E)(this.$user())}}),methods:Ne({},Object(O.b)({deleteAggregate:n.w,deleteLegacyNotifications:n.x}),{getUnmutedActors:function(t){var e=this;return Ce.includes(t.notification_type)?t.actor_uuid_list:t.actor_uuid_list.filter(function(t){return e.getUser(t).name&&!e.isMutedUser(t)})},clearSectionNotifications:function(){return Promise.all([Promise.all(this.clearNotifications()),this.clearLegacyNotifications()])},clearNotifications:function(){return this.getCanBeDeletedNotificationsList().filter(function(t){return t.service_type!==Y.f.LEGACY}).map(function(t){return t.grouping_key}).map(this.deleteAggregate)},clearLegacyNotifications:function(){var t=this,e=this.getCanBeDeletedNotificationsList().filter(function(t){return t.service_type===Y.f.LEGACY}).map(function(t){return t.notification_uuid});if(0===e.length)return Promise.resolve();var i=e.map(this.getLegacyNotificationByUuid).flatMap(function(t){return t.notifications});return this.deleteLegacyNotifications(i).then(function(){return t.$store.commit(A.Mb,{key:t.$store.getters[s.cb],items:e})})},getCanBeDeletedNotificationsList:function(){return this.notifications.filter(function(t){return t.notification_type!==Y.b.INITIAL})}}),components:{notificationsList:_e,sectionHeader:Ee}},Te=Object(Q.a)($e,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"fade"}},[t.hasNotifications?i("section",{staticClass:"vf-empty-bg-colour vf-notification-section"},[i("section-header",{attrs:{header:t.header,"should-show-clear-button":t.shouldShowClearButton},on:{clear:t.clearSectionNotifications}}),t._v(" "),i("notifications-list",{attrs:{notifications:t.visibleNotifications,section:t.header}})],1):t._e()])},[],!1,null,null,null).exports,xe=(i(871),i(872)),ke=i.n(xe),Se=i(266),Ie=Object(E.b)(v.a),Ae={extends:W,computed:{currentUserUuid:function(){return this.$store.getters[s.cb]},alertsList:function(){return this.$store.getters[s.Sc](this.currentUserUuid)},sections:function(){var t=this.currentUserUuid;return[{header:Y.a.TODAY,notifications:this.$store.getters[s.dd](t)},{header:Y.a.YESTERDAY,notifications:this.$store.getters[s.ed](t)},{header:Y.a.OLDER,notifications:this.$store.getters[s.cd](t)}]},showOptIn:function(){return Object(h.f)()||Object(h.e)()}},methods:{getAlertComponentName:function(t){return R[t]},markInitialNotificationAsRead:function(){this.$store.commit(A.Xc,{key:K.a,item:{read_status:Y.d}}),window.localStorage.setItem("_vf_initial_notification_read_status",Y.d)}},mounted:function(){var t=this;this.$subscribe(r.z.CHANNEL,r.z.EVENTS.CLOSED,function(){t.markInitialNotificationAsRead()})},components:{vfFeedOptIn:l.a.extend({template:ke.a,inject:["settings"],data:function(){var t=Object(N.h)();return{slideOut:!1,isVisible:!0,text:{header:this.$i18n("feed.opt_in.header"),close:this.$i18n("feed.opt_in.close"),description:t?this.$i18n("feed.opt_in.description_mobile"):this.$i18n("feed.opt_in.description_desktop"),link:this.$i18n("feed.opt_in.link_subscribe"),linkDescription:t?this.$i18n("feed.opt_in.link_description_mobile"):this.$i18n("feed.opt_in.link_description_desktop"),status:this.$i18n("feed.opt_in.link_subcription_status_unsubscribed")}}},created:function(){this.$subscribe("push","subscribed",this.close),this.$subscribe("push","unsubscribed",this.showComponent)},computed:{user:function(){return this.$store.getters[s.bb]},pushState:function(){return this.$store.getters[s.mc](this.user.uuid)},subscriptionStatus:function(){return this.pushState.isSubscribed},promptOptIn:function(){var t=this.settings.enable_push_notifications&&Object(h.h)()&&!this.wasDismissedByUser()&&!this.userHasSubscribed()&&Object(h.i)()&&this.hasSubscriptionDomain;return Object(y.E)(this.user)?t:t&&!Object(Se.d)(this.pushState)&&!Object(Se.c)(this.pushState)},classes:function(){return{"vf-mobile":Object(N.h)()}},hasSubscriptionDomain:function(){return Object(h.f)()||Object(h.e)()||Boolean(this.settings.client_opt_in_url)}},watch:{subscriptionStatus:function(t){"processing"===t?(this.text.link=this.$i18n("feed.opt_in.link_processing"),this.text.status=this.$i18n("feed.opt_in.link_subscription_status_processing")):!1===t?(this.text.link=this.$i18n("feed.opt_in.link_error"),this.text.status=this.$i18n("feed.opt_in.link_subscription_status_error")):this.text.status=this.$i18n("feed.opt_in.link_subscription_status_subscribed")}},methods:{dismiss:function(){this.setAsDismissed(),this.close()},subscribe:function(){this.$publish("push","subscribe")},setAsDismissed:function(){window.localStorage.setItem("".concat("vf-push-notifications-opt-in","_").concat(this.user.uuid),"dismissed")},close:function(){this.isVisible=!1},showComponent:function(){this.isVisible=!0},wasDismissedByUser:function(){return window.localStorage.getItem("".concat("vf-push-notifications-opt-in","_").concat(this.user.uuid))||!this.isVisible},userHasSubscribed:function(){return!0===this.pushState.isSubscribed}},components:{vfCloseButton:Ie}}),feedSection:Te}},Le=Object(Q.a)(Ae,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.showOptIn?i("vf-feed-opt-in"):t._e(),t._v(" "),i("div",{staticClass:"vf-feed-content vf-empty-bg-colour"},[i("section",{staticClass:"vf-notification-alert-section",attrs:{role:"alert"}},[i("ol",{staticClass:"vf-vert-list"},t._l(t.alertsList,function(e){return i(t.getAlertComponentName(e.status),{key:e.key,tag:"component",attrs:{alert:e}})}),1)]),t._v(" "),t._l(t.sections,function(t){return i("feed-section",{key:t.header,attrs:{header:t.header,notifications:t.notifications}})})],2)],1)},[],!1,null,null,null).exports,Ue=(i(873),i(874)),Pe=i.n(Ue),je=(i(875),i(876)),Me=i.n(je),De=function(t,e){return t.uuid===e.uuid},He=l.a.extend({template:Me.a,props:["user"],inject:["settings"],computed:{displayName:function(){return this.user?this.user.username_pending||this.user.name:null},classes:function(){return{"vf-unmute-button":this.user.isMuted,"vf-mute-button":!this.user.isMuted}},action:function(){return this.user.isMuted?"unmute":"mute"},showMuteButton:function(){return this.settings.enable_muting&&Object(y.E)(this.$user())&&!De(this.user,this.$user())&&!Object(y.G)(this.$user())},isMyProfile:function(){return De(this.user,this.$user())},avatarProps:function(){return{user:this.user,current_user_uuid:this.$user().uuid,size:et.a.LARGE}}},components:{vfAvatar:rt.a,"vf-mute-action-button":ae}}),ze=(i(763),i(764)),Fe=i.n(ze),Be=i(765),Re=i.n(Be),Ve=i(766),Ge=i.n(Ve),qe=i(877),Ke=i.n(qe),Ye=i(878),We=i.n(Ye),Je=Lt.a.extend({data:function(){return{graphics:Fe.a,viewBox:"0 0 17 17"}}}),Xe=Lt.a.extend({data:function(){return{graphics:Ge.a,viewBox:"-1 0 17 17"}}}),Ze=Lt.a.extend({data:function(){return{graphics:Re.a,viewBox:"0 0 17 17"}}}),Qe=l.a.extend({template:We.a,props:["count"],computed:{getIconName:function(){return"vf-".concat(this.count.name,"-icon")}},methods:{onClick:function(){if(De(this.count.user,this.$user()))switch(this.count.name){case"follows":this.$publish(r.A.CHANNEL,r.A.EVENTS.CHANGE,"vf-community"),this.$publish("community-tab","change","followers")}}},components:{vfCommentsIcon:Je,vfFollowsIcon:Xe,vfLikesIcon:Ze}}),ti=l.a.extend({template:Ke.a,props:["user"],inject:["settings"],computed:{counts:function(){var t=[{name:"comments",user:this.user,icon:Fe.a,text:this.$i18n("profile.comment",{num:this.user.comments_made}),hasClickEvent:!1},{name:"likes",user:this.user,icon:Re.a,text:this.$i18n("profile.like",{num:this.user.likes_received}),hasClickEvent:!1}];if(Object(y.h)(this.settings)){var e=this.$store.getters[s.ib](this.user.uuid);t.push({name:"follows",user:this.user,icon:Ge.a,text:this.$i18n("profile.followers",{num:e.length}),hasClickEvent:De(this.user,this.$user())})}return t}},components:{vfProfileCount:Qe}}),ei=(i(879),i(880)),ii=i.n(ei),ni=i(881),si=i.n(ni),ri=i(882),ai=i.n(ri),oi=i(405);var ci=l.a.extend({template:ai.a,props:["type","name"],computed:{content:function(){var t="activity.content.alert.".concat(this.type);return this.name?this.$i18n("".concat(t,".other"),{name:this.name}):this.$i18n("".concat(t,".self"))},classes:function(){return t={"vf-content-alert":!0},e="vf-content-alert-".concat(this.type),i=!0,e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t;var t,e,i}},components:{vfExclamationMarkIcon:oi.a}}),ui=i(883),li=i.n(ui),fi=(i(283),i(884)),di=i.n(fi),hi=(i(885),i(499)),pi=i(886),vi=i.n(pi),mi=Lt.a.extend({data:function(){return{graphics:vi.a}}}),gi=l.a.extend({template:di.a,props:{media:{type:Object,required:!0}},computed:{classes:function(){return{"vf-thumbnail":!0,"vf-video-processing":this.isLoading}},width:function(){return this.isVideo?this.media.width:this.isPicture?(this.media.s||this.media.t).x:0},height:function(){return this.isVideo?this.media.height:this.isPicture?(this.media.s||this.media.t).y:0},vfImageData:function(){return{src:this.thumbnail,originalWidth:this.width,originalHeight:this.height,cropShape:hi.a.SQUARE,class:this.classes}},isLoading:function(){return this.isVideo&&"in_progress"===this.media.processing_status},isPicture:function(){return"imagefile"===this.media.type},isVideo:function(){return"videofile"===this.media.type},thumbnail:function(){return this.isPicture?this.media.s&&this.media.s.url||this.media.t.url:this.isVideo&&this.media.thumbs_status?this.media.thumbs.small:null}},components:{vfProcessingIcon:mi,vfImage:hi.b}});var bi=l.a.extend({props:{media:{type:Array,default:function(){return[]}},maxMedia:{type:Number,default:4}},template:li.a,computed:{classes:function(){var t,e,i,n="vf-media-gallery-".concat(this.maxMedia);return i=!0,(e=n)in(t={"vf-media-gallery":!0})?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t},visibleMedia:function(){return this.media.length<=this.maxMedia?this.media:this.media.slice(0,this.maxMedia)}},methods:{count:function(t){return t<this.maxMedia-1?0:this.media.length-this.maxMedia}},components:{vfMediaThumbnail:gi}});function _i(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var yi=l.a.extend({template:si.a,props:["action","name"],computed:function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),n.forEach(function(e){_i(t,e,i[e])})}return t}({},Object(O.c)({getRelativeTime:s.nc}),{comment:function(){return this.action},page:function(){var t=this.comment.content_uuid;return this.$store.getters[s.lc]({uuid:t})},status:function(){return this.comment.processing_status},deepLinkedUrl:function(){return"".concat(this.page.url,"#vf-").concat(Object(de.g)(this.comment.uuid))},title:function(){var t="review"===this.comment.type?"review":"comment";return 0===this.name.length?this.$i18n("profile.user_actions.comment.".concat(t,".self")):this.$i18n("profile.user_actions.comment.".concat(t,".other"),{name:this.name})},hasMedia:function(){return Boolean(this.comment.media)},media:function(){return this.comment.media?this.comment.media:[]},text:function(){return Object(X.b)(this.comment.content,100)},getActivityAlertType:function(){return"removed"===this.status||"disabled"===this.status?this.status:!!this.isContentMissing&&"missing"},isContentMissing:function(){return"image"===this.comment.type&&!(this.comment.picture||this.media)||"video"===this.comment.type&&!(this.comment.video||this.media)},timestamp:function(){return this.comment.date_created}}),components:{vfRecord:st,vfActivityContentAlert:ci,vfMediaGallery:bi,vfTimestamp:at.a}}),wi=l.a.extend({template:ii.a,props:{user:{type:Object,required:!0},isCurrentUser:{type:Boolean,required:!0}},computed:{name:function(){return this.isCurrentUser?"":this.user.name},comments:function(){return this.$store.getters[s.ub](this.$store.getters[s.D](this.user.uuid))},emptyMessage:function(){return this.isCurrentUser?this.$i18n("profile.user_actions.comment.none.self"):this.$i18n("profile.user_actions.comment.none.other",{name:this.user.name})}},components:{vfAction:yi}}),Ei=(i(887),i(888)),Ni=i.n(Ei),Oi=i(529),Ci=i(895),$i={template:Ni.a,extends:W,props:["user"],data:function(){return{expanded:!1}},methods:{onExpandCollapse:function(){this.expanded=!this.expanded}},computed:{title:function(){return this.$i18n("profile.id_container_title")},footerText:function(){return this.$i18n("profile.id_container_footer_text")},columns:function(){return[{header:"",field:"idType",isRowHeader:!0},{header:"",field:"idValue"}]},rows:function(){var t={idType:{value:this.$i18n("profile.viafoura_id")},idValue:{value:this.viafouraId}},e=this.thirdPartyId,i={idType:{value:this.$i18n("profile.third_party_id")},idValue:{value:e}};return e?[t,i]:[t]},viafouraId:function(){return this.user?this.user.id:null},thirdPartyId:function(){return this.user?this.user.social_login_id:null},a11yDescription:function(){return this.$i18n("profile.user_details_button_description")}},components:{vfContainer:Oi.a,vfTable:Ci.a}},Ti=W.extend({template:Pe.a,props:["tabOptions"],mounted:function(){var t=this.tabOptions.user_uuid;return this.uuid=t,Promise.all([this.$store.dispatch(n.wb,t),this.$store.dispatch(n.X,{uuid:t}),this.$store.dispatch(n.db,{uuid:t})])},computed:{user:function(){var t=this.tabOptions.user_uuid;return this.$store.getters[s.Yc](t)},isCurrentUser:function(){return this.user.uuid===this.$store.getters[s.cb]},isVisibleToCurrentUser:function(){return this.$store.getters[s.Hb]}},watch:{user:function(t){var e=t.uuid;return e===this.uuid?Promise.resolve():(this.uuid=e,Promise.all([this.$store.dispatch(n.wb,e),this.$store.dispatch(n.X,{uuid:e}),this.$store.dispatch(n.db,{uuid:e})]))}},components:{vfProfileHeader:He,vfProfileOverview:ti,vfProfileActivity:wi,vfProfileUserDetails:$i}}),xi=(i(898),i(899)),ki=i.n(xi),Si=i(900),Ii=i.n(Si),Ai=i(901),Li=i.n(Ai),Ui=(i(902),i(903)),Pi=i.n(Ui),ji=i(396),Mi=i(904),Di=i.n(Mi),Hi=Object(E.b)(v.a),zi=l.a.extend({template:Di.a,props:["textKey"],components:{vfCloseIcon:v.a,vfCloseButton:Hi}});var Fi,Bi=l.a.extend({props:{model:{type:Object,require:!0}},template:Pi.a,computed:{descriptor:function(){return this.$i18n("community.following.getDate")},currentUser:function(){return this.$store.getters[s.bb]},isUser:function(){return"user"===this.model.type},isAuthor:function(){return"author"===this.model.type},isTopic:function(){return!this.isUser&&!this.isAuthor},avatarProps:function(){return{user:this.model,current_user_uuid:this.currentUser.uuid,size:et.a.MEDIUM,isClickable:!0}},getClientClass:function(){var t,e,i,n="vf-client--".concat(this.model.type);return t={},e=n,i=this.isTopic,e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}},methods:{onAvatarClick:function(){switch(this.model.type){case"user":this.toggleOtherUserProfile()}},toggleOtherUserProfile:function(){Object(G.c)(this.model)||this.$publish(r.A.CHANNEL,r.A.EVENTS.CHANGE,b.PROFILE,{user_uuid:this.model.uuid})},onDismissClick:function(){switch(this.$emit("unfollow"),this.canUnfollow=!1,this.model.type){case"user":this.$store.dispatch(n.Zc,{uuid:this.model.uuid});break;default:window.vf.topics.unsubscribe(this.model.uuid,this.$store)}}},components:{vfDismiss:zi,vfTopicIcon:Ft,vfAuthorIcon:Bt.a,vfAvatar:rt.a,vfTimestamp:at.a,vfRecord:st,vfBadge:ji.a}}),Ri=l.a.extend({props:{model:{type:Object,required:!0}},template:Li.a,computed:{descriptor:function(){return null},avatarProps:function(){return{user:this.model,current_user_uuid:this.$store.getters[s.cb],size:et.a.MEDIUM,isClickable:!0}}},methods:{toggleOtherUserProfile:function(){Object(G.c)(this.model)||this.$publish(r.A.CHANNEL,r.A.EVENTS.CHANGE,b.PROFILE,{user_uuid:this.model.uuid})}},components:{vfAvatar:rt.a,vfTimestamp:at.a,vfRecord:st}}),Vi=function(t,e,i){return Ri.extend({computed:{descriptor:function(){return this.$i18n(t)},timestamp:function(){return this.model[e]}},components:{"vf-community-action-button":i}})},Gi=Vi("community.followers.getDate","date_following",re),qi=Bi,Ki=Vi("community.muted.getDate","date_muted",ae),Yi=Vi("community.suggestions.getDate","date",re),Wi=l.a.extend({template:Ii.a,props:["items","tab"],computed:{models:function(){return"following"===this.tab?this.items:this.$store.getters[s.wb](this.items)}},methods:{focusNearest:function(t){var e=this.$refs.items[t-1];e?e.$el.querySelector(".vf-dismiss").focus():this.$emit("focus-current-tab")}},components:{following:qi,followers:Gi,muted:Ki,suggestions:Yi}}),Ji=i(905),Xi=i.n(Ji),Zi=W.extend({template:Xi.a,props:["suggestions"],components:{"vf-community-items":Wi,vfRecord:st}}),Qi="followers",tn="following",en="muted",nn=W.extend({template:ki.a,inject:["settings"],mounted:function(){this.$subscribe("community-tab","change",this.changeTab),this.showMutes&&this.$store.dispatch(n.lb,{uuid:this.user.uuid}).catch(function(){}),this.showFollows&&(this.$store.dispatch(n.db,{uuid:this.user.uuid}).catch(function(){}),this.$store.dispatch(n.cb,{uuid:this.user.uuid}).catch(function(){})),this.$store.dispatch(n.ub).catch(function(){})},data:function(){var t=this.$user(),e=this.settings.enable_muting&&!Object(y.G)(t),i=!this.settings.disable_email_notifications,n={user:t,showMutes:e,showFollows:i,communityTab:!i&&e?en:Qi};return n},computed:{alerts:function(){var t=this.$store.getters[s.cb];return this.$store.getters[s.Sc](t)},showTopList:function(){return this.communityTab===tn&&0===this.followees.length&&this.topUsers.length>0&&this.showFollows},followees:function(){return this.$store.getters[s.gb]},followers:function(){return this.$store.getters[s.ib](this.$store.getters[s.cb])},muted:function(){return this.$store.getters[s.cc](this.$store.getters[s.cb])},topUsers:function(){return this.$store.getters[s.Rc]({uuid:this.$store.getters[s.cb]})},showCommunity:function(){return this.headers.length>0},headers:function(){var t=this,e=this.showFollows?[tn,Qi]:[],i=this.showMutes?[en]:[],n=e.concat(i);return n.map(function(e){return{name:e,i18nKey:"community.".concat(e,".header"),count:t.mapTabToList(e).length,classes:[e],ariaLabel:t.$i18n("community.".concat(e,".headerAriaLabel"),{num:t.mapTabToList(e).length})}})}},methods:{focusCurrentTab:function(){this.$el.querySelector(".vf-tabbed-nav .vf-active").focus()},getEmptyCommunityTabText:function(t){return"community.".concat(t,".empty")},getAlertComponentName:function(t){return"vf-feed-alert-".concat(t)},changeTab:function(t){this.communityTab=t},getClasses:function(t){var e=t===this.communityTab;return{active:e,"vf-primary-text-colour vf-primary-bg-colour ":e,"vf-secondary-bg-colour vf-secondary-text-colour":!e}},mapTabToList:function(t){switch(t){case tn:return this.followees;case Qi:return this.followers;case en:return this.muted;default:return[]}},getCommunityList:function(){return this.mapTabToList(this.communityTab)},showEmpty:function(){return this.communityTab===tn?0===this.followees.length&&0===this.topUsers.length:0===this.$store.getters[s.wb](this.getCommunityList()).length}},components:{"vf-feed-alert-approved":R.approved,"vf-feed-alert-rejected":R.rejected,"vf-feed-alert-information":R.information,"vf-community-items":Wi,"vf-community-suggestions":Zi,vfTabbedNavigation:w.a}}),sn=(i(137),i(906)),rn=i.n(sn),an=i(167),on=i(768),cn=i(73),un=(i(927),i(928)),ln=i.n(un),fn=i(416);function dn(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var hn,pn,vn,mn,gn,bn="push_unsupported",_n="push_blocked",yn="must_enable_push",wn="other_error",En="no_error",Nn=(dn(Fi={},bn,{messageKey:"settings.controls.browser_notification_unsupported",hasLink:!1,type:fn.a.WARNING}),dn(Fi,yn,{messageKey:"settings.controls.browser_notification_enable",hasLink:!0,type:fn.a.WARNING}),dn(Fi,_n,{messageKey:"settings.controls.browser_notification_blocked",hasLink:!0,type:fn.a.ERROR}),dn(Fi,wn,{messageKey:"settings.controls.browser_notification_error",hasLink:!1,type:fn.a.ERROR}),dn(Fi,En,{}),Fi),On=i(505),Cn=i(929),$n=i.n(Cn),Tn=i(930),xn=i.n(Tn),kn=i(425),Sn=(hn=h.f,pn=h.e,vn=h.h,mn=Se.d,gn=Se.c,function(t,e){var i=hn()||pn();if(t&&i){if(!vn())return bn;if(!mn())return gn()?_n:yn}return e?wn:En});function In(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var An=l.a.extend({template:ln.a,data:function(){var t=this.$store.getters[s.bb];return{isEmailNotificationChecked:Boolean(t.email_notice_frequency),isEmailNotificationProcessing:!1,browserNotificationMessage:{},browserIcon:$n.a,emailIcon:xn.a,text:{header:this.$i18n("settings.update.notifications")},hasSubscribeError:!1}},mounted:function(){var t=this;this.updateBrowserNotificationMessage(),this.$subscribe("push","update-permission",function(){t.updateBrowserNotificationMessage(!1)}),this.$subscribe("push","subscribe-error",function(){t.updateBrowserNotificationMessage(!0)}),this.$subscribe("push","subscribed",this.updateBrowserNotificationMessage),this.$subscribe("push","unsubscribed",this.updateBrowserNotificationMessage)},computed:function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),n.forEach(function(e){In(t,e,i[e])})}return t}({},Object(O.c)({user:s.bb,settings:s.yc,isSVODEnabled:s.Ic}),{pushState:function(){return this.$store.getters[s.mc](this.user.uuid)},canUpdateBrowserNotifications:function(){return!(!this.settings.enable_push_notifications||!Object(h.h)())&&!!(Object(h.f)()||Object(h.e)()||this.settings.client_opt_in_url)},showHeader:function(){return this.canUpdateBrowserNotifications||this.canUpdateEmailNotifications},canUpdateEmailNotifications:function(){return!this.settings.disable_email_notifications&&this.isLoggedIn&&(!this.isSocial||this.user.social_login_provider===cn.e||this.user.social_login_provider===cn.f)},isBrowserNotificationChecked:function(){return Object(Se.a)(this.pushState)},isBrowserNotificationProcessing:function(){return Object(Se.b)(this.pushState)},isEmailNotificationCheckedAria:function(){return JSON.stringify(this.isEmailNotificationChecked)},isBrowserNotificationCheckedAria:function(){return JSON.stringify(Object(Se.a)(this.pushState))},isLoggedIn:function(){return Object(y.E)(this.user)},isSocial:function(){return!(Object(y.F)(this.settings)||this.isSVODEnabled())&&!Object(y.L)(this.user)&&Boolean(this.user.social_login_id)},browserNotificationsSetting:function(){return{name:"browser_notifications",value:this.isBrowserNotificationChecked,indeterminate:this.isBrowserNotificationProcessing}},updateEmailNotificationsSetting:function(){return{name:"email_notifications",value:this.isEmailNotificationChecked,indeterminate:this.isEmailNotificationProcessing}}}),methods:{updateBrowserNotificationMessage:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=Sn(this.isBrowserNotificationChecked,t);this.browserNotificationMessage=Nn[e]},toggleEmailNotifications:function(){var t=this;this.isEmailNotificationProcessing=!0,this.isEmailNotificationChecked=!this.isEmailNotificationChecked;var e=this.isEmailNotificationChecked?"immediately":"never";this.$emit("toggle","email_notifications",e,function(){setTimeout(function(){t.isEmailNotificationProcessing=!1},300)})},toggleBrowserNotifications:function(){var t=Object(Se.a)(this.pushState)?"unsubscribe":"subscribe";this.$publish("push",t)},onErrorLinkClick:function(){switch(Sn(this.isBrowserNotificationChecked,!1)){case _n:this.$publish("window","redirect","http://support.viafoura.com/how-to-re-enable-browser-push-notifications/",!0);break;case yn:this.$publish("push","subscribe")}}},components:{vfToggleInput:On.a,vfStatusMessage:kn.a}}),Ln={extends:ne,computed:{textKey:function(){return"settings.file.choose_file"}},methods:{onClick:function(){this.$emit("choose-file")}}},Un=i(42),Pn={props:{user:{required:!0}},computed:{avatarProps:function(){return{user:this.user,current_user_uuid:this.$user().uuid,size:et.a.LARGE,isClickable:!0}}},methods:{onFileChange:function(t){this.file=t.currentTarget.value,this.loadAvatarFile()},getFileInput:function(){return Object(Un.a)(".vf-avatar-file",this.$el)},chooseFile:function(){var t=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});this.getFileInput().dispatchEvent(t)},validateFile:function(t){return null==t?"":t.size>1e6?"settings.error.file_too_big":t.type.includes("image")?"":"settings.error.file_wrong_type"},loadAvatarFile:function(){var t=this.getFileInput().files[0],e=this.validateFile(t);e?this.$emit("avatar-message","error",e):this.readImageFileIntoAvatar(t)},readImageFileIntoAvatar:function(t){if(t){var e=new FileReader;e.onload=function(){this.tryUpdateAvatar(e.result)}.bind(this),e.readAsDataURL(t)}},tryUpdateAvatar:function(){var t=this;this.$emit("clear-messages");var e=this.getFileInput();if(!(e.files.length<1)){var i=e.files[0];this.$store.dispatch(n.id,{uuid:this.user.uuid,file:i}).then(function(e){if(e.error)throw e;t.$emit("avatar-message","success","settings.avatar_success"),t.$publish("context","load","user",e)}).catch(function(e){t.$emit("avatar-api-error",e)})}},setDefaultAvatar:function(){var t=this;this.$store.dispatch(n.g,{uuid:this.user.uuid}).then(function(e){t.$publish("context","load","user",e)})}},components:{vfSettingsButton:Ln,vfAvatar:rt.a}},jn=(i(931),Object(Q.a)(Pn,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"vf-avatar-update vf-flex-container vf-client-settings-avatar-section",attrs:{role:"group"}},[i("vf-avatar",t._b({staticClass:"vf-client-settings-avatar-image",nativeOn:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.chooseFile(e)}}},"vf-avatar",t.avatarProps,!1)),t._v(" "),i("div",{staticClass:"vf-avatar-file-wrapper vf-client-settings-avatar-wrapper",attrs:{role:"group"}},[i("vf-settings-button",{staticClass:"vf-label vf-label-title vf-avatar-file-btn",on:{"choose-file":t.chooseFile}}),t._v(" "),i("input",{staticClass:"vf-avatar-file vf-secondary-border-colour",attrs:{type:"file",name:"avatar",id:"vf-avatar-file"},on:{change:function(e){return e.stopPropagation(),t.onFileChange(e)}}}),t._v(" "),i("p",{staticClass:"vf-client-settings-avatar-max-size"},[t._v("\n            "+t._s(t.$i18n("settings.file.max_size"))+"\n        ")]),t._v(" "),i("p",{staticClass:"vf-client-settings-avatar-supported-types"},[t._v("\n            "+t._s(t.$i18n("settings.file.supported_types"))+"\n        ")]),t._v(" "),i("a",{staticClass:"vf-primary-hoverable vf-client-settings-avatar-use-default",attrs:{href:"#"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.setDefaultAvatar(e)}}},[t._v("\n            "+t._s(t.$i18n("settings.file.use_default"))+"\n        ")])],1)],1)},[],!1,null,null,null).exports),Mn=i(754),Dn=i(408),Hn={props:{messages:{default:function(){return[]}},canUpdateProfile:{type:Boolean,default:!1},status:{type:String,required:!0}},computed:{uniqueMessages:function(){var t=[],e={};return this.messages.forEach(function(i){e[i[1]]||(t.push(i),e[i[1]]=!0)}),t}},methods:{logout:function(){this.$emit("logout-clicked")}},components:{vfButton:E.a,vfStatus:Mn.a,loaderButton:Dn.a}},zn=(i(933),Object(Q.a)(Hn,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"vf-settings-controls vf-flex-vert vf-vert-spaced vf-client-settings-button-section",attrs:{role:"group"}},[t.canUpdateProfile?i("loader-button",{staticClass:"vf-client-settings-button-update-profile",attrs:{"is-cta":"",palette:"accent",size:"medium",status:t.status},nativeOn:{click:function(e){return e.stopPropagation(),t.$emit("try-update-profile")}}},[t._v("\n        "+t._s(t.$i18n("settings.controls.update_profile"))+"\n    ")]):t._e(),t._v(" "),i("vf-button",{staticClass:"vf-client-settings-button-logout",attrs:{"is-cta":"",palette:"danger"},nativeOn:{click:function(e){return e.stopPropagation(),t.logout(e)}}},[t._v("\n        "+t._s(t.$i18n("settings.controls.logout"))+"\n    ")]),t._v(" "),t._l(t.uniqueMessages,function(t){return i("vf-status",{key:t[1],attrs:{level:t[0],text:t[1]}})})],2)},[],!1,null,null,null).exports),Fn=i(528),Bn={components:{vfTextInput:Fn.a}},Rn=Object(Q.a)(Bn,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("fieldset",{staticClass:"vf-vert-spaced vf-client-settings-form-password vf-setting-module"},[i("h1",{staticClass:"vf-client-settings-form-password-header vf-label vf-label-upper vf-setting-module__title"},[t._v("\n        "+t._s(t.$i18n("settings.update.password"))+"\n    ")]),t._v(" "),i("div",{staticClass:"vf-setting"},[i("vf-text-input",{staticClass:"vf-client-settings-form-password-field-password",attrs:{id:"vf-update-password",setting:{type:"password",name:"vf-update-password"},description:t.$i18n("settings.placeholders.new_password")},on:{input:function(e){return t.$emit("password-input",e)}}})],1),t._v(" "),i("div",{staticClass:"vf-setting"},[i("vf-text-input",{staticClass:"vf-client-settings-form-password-field-verify-password",attrs:{setting:{type:"password",name:"vf-update-password-verify"},description:t.$i18n("settings.placeholders.reenter_password")},on:{input:function(e){return t.$emit("password-verify-input",e)}}})],1)])},[],!1,null,null,null).exports,Vn={components:{vfTextInput:Fn.a}},Gn=Object(Q.a)(Vn,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("fieldset",{staticClass:"vf-vert-spaced vf-setting-module"},[i("h1",{staticClass:"vf-label vf-label-upper vf-setting-module__title"},[t._v("\n        "+t._s(t.$i18n("settings.update.credentials"))+"\n    ")]),t._v(" "),i("div",{staticClass:"vf-setting"},[i("vf-text-input",{attrs:{id:"vf-current-password",setting:{type:"password",name:"vf-current-password"},description:t.$i18n("settings.placeholders.current_password")},on:{input:function(e){return t.$emit("password-input",e)}}})],1)])},[],!1,null,null,null).exports,qn=i(552);i(934);function Kn(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Yn=W.extend({template:rn.a,data:function(){var t=this.$store.getters[s.bb];return{update_password:"",update_password_verify:"",current_password:"",messages:[],placeholders:{display_name:this.$i18n("settings.placeholders.display_name"),email:this.$i18n("settings.placeholders.email")},status:an.a.NONE,values:{name:t.name,email:t.email}}},mounted:function(){this.$subscribe("push","subscribed",this.onPushUpdated),this.$subscribe("push","unsubscribed",this.onPushUpdated)},computed:function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),n.forEach(function(e){Kn(t,e,i[e])})}return t}({},Object(O.c)({user:s.bb,settings:s.yc}),{isPasswordNeeded:function(){return Boolean(this.values.email&&this.values.email!==this.user.email||this.update_password)},isSocial:function(){return Boolean(this.user.social_login_provider&&!Object(y.L)(this.user))},isThirdParty:function(){return Boolean(this.user.social_login_id)},canUpdateAvatar:function(){return!(this.settings.disable_cookie_avatars||this.isSocial&&this.user.social_login_provider!==cn.e&&this.user.social_login_provider!==cn.f)},canUpdateName:function(){return!this.settings.disable_cookie_displayname&&!this.isThirdParty},canUpdateEmail:function(){return!this.isThirdParty},isLoggedIn:function(){return Object(y.E)(this.user)},canUpdatePassword:function(){return this.isLoggedIn&&!this.isThirdParty},showCurrentPassword:function(){return!this.isThirdParty&&this.isPasswordNeeded},baseSchema:function(){return[{component:on.a.TEXT_INPUT,key:"name",name:"name",label:this.placeholders.display_name,type:"text",test:this.canUpdateName},{component:on.a.TEXT_INPUT,key:"email",name:"email",label:this.placeholders.email,type:"email",test:this.canUpdateEmail}].filter(function(t){return!0===t.test})},canUpdateProfile:function(){return!this.isSocial&&this.baseSchema.length>0&&this.isLoggedIn}}),created:function(){var t=this;this.$subscribe(r.a.CHANNEL,r.a.EVENTS.LOGOUT_FAILURE,function(){t.messages.push(["error",t.$i18n("settings.error.unable_to_logout")])})},methods:{onPushUpdated:function(){this.messages=[["success",this.$i18n("settings.profile_success")]]},isFormEmpty:function(){return 0===this.values.name.length&&0===this.values.email.length&&0===this.update_password.length},isNewPasswordVerified:function(){return this.update_password===this.update_password_verify},validateUserUpdate:function(){if(this.isFormEmpty())return"settings.error.empty_form";if(this.values.email&&this.values.email!==this.user.email||this.update_password){if(0===this.current_password.length)return"settings.error.empty_current_password";if(this.update_password&&!this.isNewPasswordVerified())return"settings.error.mismatching_new_passwords"}return""},getProfileUpdates:function(){var t={};this.showCurrentPassword&&this.current_password&&(t.old_password=this.current_password),this.update_password&&(t.new_password=this.update_password);var e=this.values.name;e&&e!==this.user.name&&(t.name=e);var i=this.values.email;return i&&i!==this.user.email&&(t.email=i),t},tryUpdateProfile:function(){var t=this;if(this.clearMessages(),this.canUpdateProfile&&this.status===an.a.NONE){var e=this.validateUserUpdate();if(e)this.messages.push(["error",this.$i18n(e)]);else{var i=this.getProfileUpdates();Object.keys(i).length>0&&(this.status=an.a.PENDING,this.$store.dispatch(n.nd,{uuid:this.user.uuid,updates:i}).then(function(e){t.status=an.a.NONE,t.messages.push(["success",t.$i18n("settings.profile_success")]),t.$publish("context","load","user",e)}).catch(function(e){t.status=an.a.NONE,t.messages.push(["error",t.$i18n(t.getErrorStatus(e))])}))}}},tryUpdateEmailNotifications:function(t){var e=this;this.clearMessages();var i={email_notice_frequency:t};return this.$store.dispatch(n.nd,{uuid:this.user.uuid,updates:i}).then(function(t){if(t.error)throw t;e.messages.push(["success",e.$i18n("settings.profile_success")])})},getErrorStatus:function(t){return Number.isInteger(t)?this.getErrorStatusFromCode(t):this.getErrorStatusFromObject(t)},getErrorStatusFromObject:function(t){switch(t.api_code){case 327681:return"settings.error.email_in_use";case 327684:return"settings.error.invalid_image_type"}if(t.validation_errors){if(t.validation_errors.email)return"settings.error.invalid_email_address";if(t.validation_errors.old_password||t.validation_errors.new_password)return"settings.error.invalid_password"}return"settings.error.unknown"},getErrorStatusFromCode:function(t){switch(t){case 503:return"settings.error.service_unavailable";default:return"settings.error.unknown"}},onToggle:function(t,e,i){switch(t){case"email_notifications":this.tryUpdateEmailNotifications(e).then(i).catch(i)}},clearMessages:function(){this.messages=[]},addStatusMessage:function(t,e){this.messages.push([t,this.$i18n(e)])},addApiError:function(t){this.messages.push(["error",this.$i18n(this.getErrorStatus(t))])},onLogout:function(){this.$publish(r.a.CHANNEL,r.a.EVENTS.LOGOUT)},updateValue:function(t){var e=t.key,i=t.value;this.values[e]=i}},components:{vfAvatarUpload:jn,vfSettingsControls:zn,vfToggleSettings:An,vfUpdatePassword:Rn,vfVerifyPassword:Gn,vfInputList:qn.a}}),Wn=(i(26),i(27),i(98),i(935)),Jn=i.n(Wn),Xn=i(25),Zn=i(542);function Qn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=[],n=!0,s=!1,r=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){s=!0,r=t}finally{try{n||null==o.return||o.return()}finally{if(s)throw r}}return i}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ts(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),n.forEach(function(e){es(t,e,i[e])})}return t}function es(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var is={nickname:"NickName",firstname:"FirstName",lastname:"LastName",birthdate:"BirthDate",gender:"Gender",state:"State"},ns={extends:Yn,template:Jn.a,data:function(){var t=this.getSchema(),e=this.$store.getters[s.Gc](),i=this.$store.getters[s.bb],n=this.$store.getters[s.yc];return{schema:t,profile:e,values:this.getInitialValues(t,e,i,n)}},created:function(){delete this.values.name,delete this.values.email},computed:ts({},Object(O.c)({isSocialUser:s.Jc}),{canChangePassword:function(){return!this.isSocialUser()},showCurrentPassword:function(){return this.canChangePassword},canUpdateProfile:function(){return!0}}),methods:{getSchema:function(){return this.$store.getters[s.Hc]().filter(function(t){return"password"!==t.name}).map(function(t){return{key:t.name,name:t.name,label:t.display,type:t.type,options:t.options}}).map(Zn.a)},getInitialValues:function(t,e,i,n){var s=this;return t.map(function(t){return t.name}).reduce(function(t,r){return ts({},t,es({},r,s.getLRValue(r,e,i,n)))},{})},getLRUpdates:function(){var t=this,e={};return Object.entries(this.values).forEach(function(i){var n=Qn(i,2),s=n[0],r=n[1];r&&t.getLRValue(s)!==r&&(e[s]=r)}),e},isFormEmpty:function(){return 0===this.update_password.length&&Object.values(this.values).every(function(t){return!t})},validateUserUpdate:function(t){return this.isFormEmpty()?"settings.error.empty_form":this.canChangePassword&&!t.old_password?"settings.error.empty_current_password":t.new_password&&t.new_password!==this.update_password_verify?"settings.error.mismatching_new_passwords":""},tryUpdateProfile:function(){if(this.clearMessages(),this.status===an.a.NONE){var t=this.getProfileUpdates(),e=this.validateUserUpdate(t);if(e)this.messages.push(["error",this.$i18n(e)]);else{var i=this.getLRUpdates();if(i.emailid)if(this.canChangePassword)this.authenticateAndUpdateEmail(t,i);else{var n=this.$store.getters[s.Ec]();this.updateEmail(t,i,n)}var r=this.formatUpdates(i);if(r.length>0)if(this.status=an.a.PENDING,this.canChangePassword)this.authenticateAndUpdateProfile(t,r);else{var a=this.$store.getters[s.Ec]();this.updateProfile(t,r,a)}t.new_password&&this.updatePassword(t)}}},tryLogin:function(t){this.status=an.a.PENDING;var e=this.getEmail();return this.$store.dispatch(n.Rc,{email:e,password:t}).catch(this.onSvodError)},updateEmail:function(t,e,i){var s=this;this.$store.dispatch(n.Ac,{email:e.emailid}).catch(this.onSvodError).then(function(){return s.setLocalStorageEmail(e.emailid)}).then(function(){return Object(Xn.l)(i)}).then(this.getSuccessHandler("email")).catch(this.onError)},authenticateAndUpdateEmail:function(t,e){var i=this;return this.tryLogin(t.old_password).then(function(n){var s=n.access_token;return i.updateEmail(t,e,s)})},authenticateAndUpdateProfile:function(t,e){var i=this;return this.tryLogin(t.old_password).then(function(n){var s=n.access_token;return i.updateProfile(t,e,s)})},updateProfile:function(t,e,i){var s=this;return this.$store.dispatch(n.Sc,{access_token:i,updates:e}).catch(this.onSvodError).then(function(t){var e=t.access_token,i=t.Profile;return s.$store.commit(A.Oc,i),s.profile=i,e}).then(function(t){return Object(Xn.l)(t)}).then(this.getSuccessHandler("profile")).catch(this.onError)},updatePassword:function(t){var e=this;return this.tryLogin(t.old_password).then(function(i){var s=i.access_token;return e.$store.dispatch(n.Bc,{oldPassword:t.old_password,newPassword:t.new_password,currentPassword:t.new_password}).catch(e.onSvodError).then(function(){return Object(Xn.l)(s)}).then(e.getSuccessHandler("password"))}).catch(this.onError)},getSuccessHandler:function(t){var e=this;return function(i){return e.messages.push(["success",e.$i18n("settings.".concat(t,"_success"))]),Object(Xn.c)(i).then(function(t){e.status=an.a.NONE,e.$publish("context","load","user",t)})}},onError:function(t){this.status=an.a.NONE,t&&this.messages.push(["error",t||this.$i18n("settings.error.unknown")])},onSvodError:function(t){return this.status=an.a.NONE,Promise.reject(this.onError(this.getSvodError(t)))},getSvodError:function(t){var e;switch(t[0]&&t[0].ErrorCode){case 905:e="invalid";break;case 906:e="expired";break;case 908:e="incorrect_format";break;case 936:e="email_taken";break;case 966:e="invalid_credentials";break;default:return t[0]&&t[0].Message}return this.$i18n("svod.settings.".concat(e))},getEmail:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.profile,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.user,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.settings;return e?Object(y.C)(e,i)?e.email_pending:!e.email&&t.Email?t.Email.find(function(t){return"Primary"===t.Type}).Value||"":e.email||"":""},getLRValue:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.profile,i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;return"emailid"===t?this.getEmail(e,i,n):e[is[t]]},setLocalStorageEmail:function(t){var e=JSON.parse(window.localStorage.getItem("LoginRadiusUser"));e.Email=[{Type:"Primary",Value:t}],this.profile=e,this.$store.commit(A.Oc,e)},formatUpdates:function(t){var e=ts({},t);return delete e.emailid,Object(St.d)(e)},getId:function(t){return"vf-update-".concat(t)}}},ss=(i(936),i(937)),rs=i.n(ss),as=i(938),os=i.n(as);i(84);var cs={props:["login"],computed:{provider:function(){return"vf-".concat(this.login.provider)},classes:function(){return t={},e="vf-".concat(this.login.provider,"-login"),i=!0,e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t;var t,e,i},ariaLabel:function(){return this.login.provider}},methods:{onThirdPartyIconClick:function(t){var e=t.target.closest("li").getAttribute("data-thirdparty").replace("vf-","");this.$publish(r.n.CHANNEL,r.n.EVENTS.SOCIAL,e)}},components:{vfButton:E.a}},us=(i(939),Object(Q.a)(cs,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",{staticClass:"vf-thirdparty-control",attrs:{"data-thirdparty":t.provider}},[i("vf-button",{staticClass:"vf-thirdparty-icon",class:t.classes,attrs:{"aria-label":t.ariaLabel},nativeOn:{click:function(e){return t.onThirdPartyIconClick(e)}}},[[t.login.icon?i(t.login.icon,{tag:"component",attrs:{"aria-hidden":!0}}):i("span",{staticClass:"vf-social-icon",attrs:{"aria-hidden":!0}})]],2)],1)},[],!1,null,null,null).exports),ls=i(594),fs=i(941),ds=i(943),hs=i(945),ps=i(506),vs=i(948),ms=function(t){switch(t){case"facebook":return ls.a;case"google":return fs.a;case"linkedin":return ds.a;case"windowslive":return hs.a;case"twitter":return ps.a;case"yahoo":return vs.a;default:return""}},gs={facebook:"authprovider_facebook_enabled",google:"authprovider_google_enabled",linkedin:"authprovider_linkedin_enabled",twitter:"authprovider_twitter_enabled",windowslive:"authprovider_windowslive_enabled",yahoo:"authprovider_yahoo_enabled"},bs=l.a.extend({template:os.a,props:["ariaHeaderText"],inject:["settings"],data:function(){return{showMore:this.$i18n("feed.account.nav.show_more")}},methods:{toggleText:function(t){t.target.control.checked?this.showMore=this.$i18n("feed.account.nav.show_more"):this.showMore=this.$i18n("feed.account.nav.show_less")}},computed:{fullLoginList:function(){var t=this;return cn.h.filter(function(e){return t.settings[gs[e]]}).map(function(t){return{provider:t,icon:ms(t)}})},loginList:function(){return this.fullLoginList.slice(0,6)},showMoreList:function(){return this.fullLoginList.slice(6)}},components:{vfThirdpartyService:us}}),_s=(i(950),i(951)),ys=i.n(_s),ws=i(952),Es=i.n(ws),Ns=i(953),Os=i.n(Ns),Cs=l.a.extend({template:Os.a,data:function(){return{title:"",description:"",viewBox:"0 0 0 0",defs:"",graphics:""}},computed:{getClasses:function(){return""},getTransform:function(){return""},getGraphics:function(){return this.graphics}}}).extend({data:function(){return{viewBox:"0 0 97 53",graphics:Es.a,title:"none",description:"none"}}}),$s=l.a.extend({template:ys.a,components:{signUpIllustration:Cs}}),Ts=(i(488),i(57)),xs=i(752);function ks(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=[],n=!0,s=!1,r=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){s=!0,r=t}finally{try{n||null==o.return||o.return()}finally{if(s)throw r}}return i}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Ss={props:{parentMessages:{default:function(){return[]}}},inject:["settings"],data:function(){return{fields:[],values:{}}},computed:{schema:function(){var t=this;return this.fields.map(function(e){return{key:e.key||e.name,name:e.name,label:t.labels[e.key||e.name],type:e.type}}).map(Zn.a)}},methods:{validateProp:function(t,e,i){var n=e(t);return n||this.messages.push(["error",this.$i18n(i)]),n},validateName:function(t){return this.validateProp(t,Ts.d,"feed.account.error.name")},validateEmail:function(t){return this.validateProp(t,Ts.d,"feed.account.error.email")},validatePassword:function(t){return this.validateProp(t,Ts.d,"feed.account.error.password")},clearMessage:function(t){this.messages=this.messages.filter(function(e){var i=ks(e,2),n=i[0],s=i[1];return n!==t[0]||s!==t[1]})}},components:{vfForm:xs.a}},Is={extends:Ss,created:function(){this.FORGOT_PASSWORD="fp",this.$subscribe(r.n.CHANNEL,r.n.EVENTS.FAILURE,this.login_fail),this.$subscribe("view/forms","try/login",this.loginOnSubmit)},data:function(){return{fields:[{key:"email",name:"vf-form-email",type:"email"},{key:"password",name:"vf-form-password",type:"password"}],messages:this.parentMessages,status:an.a.NONE,labels:{email:this.$i18n("feed.account.input.email"),password:this.$i18n("feed.account.input.password"),login:this.$i18n("feed.account.nav.login"),ariaHeaderText:this.$i18n("tray.authentication.login.aria.email")}}},computed:{settings:function(){return this.store.getters(s.yc)}},methods:{validateForm:function(t,e){return this.messages=[],this.status===an.a.NONE&&this.validateEmail(t)&&this.validatePassword(e)},loginOnSubmit:function(t){this.values=t;var e=this.values,i=e.email,n=e.password;this.validateForm(i,n)&&(this.status=an.a.PENDING,this.$publish(r.a.CHANNEL,r.a.EVENTS.LOGIN,i,n))},login_fail:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.status=an.a.NONE;var e=this.getLoginErrorMessage(t),i=e.message,n=e.link;this.messages=[["error",i,n]]},getLoginErrorMessage:function(t){return t&&"login_banned"===t.error_key?{message:this.getBanError(t)}:403===t.http_status?{message:this.$i18n("feed.account.error.cookies_blocked"),link:{href:"https://support.viafoura.com/how-to-allow-third-party-cookie-access/",text:this.$i18n("feed.account.error.learn_more")}}:{message:this.$i18n("feed.account.error.login")}},getBanError:function(t){var e=t.reason,i=t.endDate,n=t.isPermanent;return this.$i18n("error.login_banned",{reason:e,endDate:new Date(i),isPermanent:n})}}},As=Object(Q.a)(Is,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"vf-relative"},[i("h4",{staticClass:"vf-offscreen-text"},[t._v("\n        "+t._s(t.labels.ariaHeaderText)+"\n    ")]),t._v(" "),t.settings.authprovider_viafoura_enabled?i("vf-form",{attrs:{id:"vf-login-form",schema:t.schema,status:t.status,messages:t.messages,"button-text":t.labels.login},on:{"form-submit":t.loginOnSubmit,"clear-message":t.clearMessage}}):t._e(),t._v(" "),t.settings.authprovider_viafoura_enabled?i("a",{staticClass:"vf-forgot-pw-link vf-accent-colour vf-accent-hoverable",attrs:{href:"#"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.$emit("view-switch",t.FORGOT_PASSWORD)}}},[t._v("\n        "+t._s(t.$i18n("feed.login.nav.forgot"))+"\n    ")]):t._e()],1)},[],!1,null,null,null).exports,Ls=i(596),Us={extends:Ss,created:function(){this.$subscribe(r.a.CHANNEL,r.a.EVENTS.SIGNUP_FAILURE,this.parseSignupFailure),this.$subscribe("view/forms","try/signup",this.signup)},data:function(){return{fields:[{name:"name",type:"text"},{name:"email",type:"email"},{name:"password",type:"password"}],statusKey:"",labels:{name:this.$i18n("feed.account.input.name"),email:this.$i18n("feed.account.input.email"),password:this.$i18n("feed.account.input.password"),signup:this.$i18n("feed.account.nav.signup"),ariaHeaderText:this.$i18n("tray.authentication.signup.aria.email")},messages:this.parentMessages,email_verification_enabled:this.settings.enable_email_verification,status:an.a.NONE}},methods:{validateForm:function(){var t=this.values,e=t.name,i=t.email,n=t.password;return this.messages=[],this.status===an.a.NONE&&this.validateName(e)&&this.validateEmail(i)&&this.validatePassword(n)},signup:function(t){this.values=t,this.validateForm()&&(this.isRecaptchaEnabled()?Ls.a.execute():this.signupAction())},parseSignupFailure:function(t){this.status=an.a.NONE;var e=this.getErrorMessage(t);this.messages=[["error",e]]},getErrorMessage:function(t){return 400===t.http_status?this.$i18n("feed.account.error.signup"):this.$i18n("feed.account.error.login")},afterRender:function(){Ls.a.load("vf-signup-g-recaptcha-submit",this.signupAction)},isRecaptchaEnabled:function(){return this.settings.enable_recaptcha},signupAction:function(t){var e=this.values,i=e.name,n=e.email,s=e.password;this.status=an.a.PENDING,this.$publish(r.a.CHANNEL,r.a.EVENTS.SIGNUP,i,n,s,t)}},mounted:function(){this.afterRender()}},Ps=Object(Q.a)(Us,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"vf-relative"},[i("h4",{staticClass:"vf-offscreen-text"},[t._v("\n        "+t._s(t.labels.ariaHeaderText)+"\n    ")]),t._v(" "),t.settings.authprovider_viafoura_enabled?i("vf-form",{attrs:{id:"vf-signup-form",schema:t.schema,status:t.status,messages:t.messages,"button-text":t.labels.signup},on:{"form-submit":t.signup,"clear-message":t.clearMessage}},[i("div",{staticClass:"vf-signup-recaptcha",attrs:{id:"vf-signup-g-recaptcha-submit"}})]):t._e()],1)},[],!1,null,null,null).exports,js=i(4),Ms=function(t){var e=js.vuexStore.getInstance().getters[s.Ic]();return!(t.authprovider_backplane_v1_2_enabled||t.authprovider_backplane_v2_enabled||t.authprovider_loginradius_enabled&&!e||t.authprovider_oauth2_enabled||t.authprovider_oauth_enabled||!t.authprovider_viafoura_enabled||t.disable_widget_logins)};function Ds(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Hs=l.a.extend({template:rs.a,props:{messages:{default:function(){return[]}},authMethod:{type:String,default:"login",validator:function(t){return["login","signup"].includes(t)}}},data:function(){return{tabs:[{name:"login",i18nKey:"feed.account.nav.login",ariaLabel:this.$i18n("feed.account.nav.login")},{name:"signup",i18nKey:"feed.account.nav.signup",ariaLabel:this.$i18n("feed.account.nav.signup")}]}},computed:function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),n.forEach(function(e){Ds(t,e,i[e])})}return t}({},Object(O.c)({settings:s.yc}),{showTrayAuthentication:function(){return Ms(this.settings)}}),methods:{switchViews:function(t){this.type=t}},components:{vfTabbedNavigation:w.a,vfAccountBackdrop:$s,vfThirdpartyIcons:bs,vfLoginForm:As,vfSignupForm:Ps}}),zs=(i(955),i(956)),Fs=i.n(zs),Bs={facebook:".vf-facebook-login .vf-social-icon-mount",google:".vf-google-login .vf-social-icon-mount",linkedin:".vf-linkedin-login .vf-social-icon-mount",twitter:".vf-twitter-login .vf-social-icon-mount",windowslive:".vf-windowslive-login .vf-social-icon-mount",yahoo:".vf-yahoo-login .vf-social-icon-mount"},Rs={props:["headerText"],mounted:function(){var t=this;this.$store.dispatch(n.Ic).then(function(){return t.$store.dispatch(n.Kc)}).then(function(){return t.injectSocialIcons()})},methods:{injectSocialIcons:function(){var t=this;cn.h.forEach(function(e){var i=Object(Un.a)(Bs[e],t.$el);new(ms(e))({el:i})})}}},Vs=Object(Q.a)(Rs,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"vf-account-thirdparty"},[e("h1",{staticClass:"vf-account-header-text h3"},[this._v("\n        "+this._s(this.headerText)+"\n    ")]),this._v(" "),e("ul",{staticClass:"vf-svod-thirdparty vf-account-thirdparty-controls vf-social-logins vf-flex-container",attrs:{id:"vf-svod-thirdparty"}}),this._v(" "),e("script",{attrs:{type:"text/template",id:"loginradiuscustom_tmpl"}},[this._v('\n        <li class="vf-thirdparty-control">\n        <button\n        class="vf-button vf-thirdparty-icon vf-<#=Name.toLowerCase()#>-login"\n        onclick="return window.vf.$publish(\\\'authentication-svod\\\', \\\'social-login\\\', \'<#=Endpoint#>\');"\n        title="<#=Name#>"\n        >\n        <span class="vf-social-icon-mount"/>\n        </button>\n        </li>\n    ')])])},[],!1,null,null,null).exports,Gs={extends:As,mounted:function(){this.$subscribe("authentication-svod","social-login",this.onSocialIconClick)},methods:{loginOnSubmit:function(t){this.values=t;var e=this.values,i=e.email,s=e.password;return this.validateForm(i,s)?(this.status=an.a.PENDING,this.$store.dispatch(n.Jc,{email:i,password:s})):Promise.resolve()},getErrorMessage:function(t){return"login_banned"===t.error_key?this.getBanError(t):t.reason?t.reason:this.$i18n("feed.account.error.login")},onSocialIconClick:function(t){this.status=an.a.PENDING,this.$store.dispatch(n.Lc,t)}}},qs=i(957),Ks={extends:Ps,template:i.n(qs).a,props:{lrSchema:{required:!0}},mounted:function(){this.$subscribe("authentication-svod","social-login",this.onSocialIconClick)},computed:{schema:function(){return this.lrSchema.map(function(t){return{key:t.name,name:t.name,label:t.display,type:t.type,options:t.options,rules:t.rules}}).map(Zn.a)}},methods:{validateForm:function(){this.messages=[];var t=this.values,e=t.emailid,i=t.password;return this.status===an.a.NONE&&this.validateRequiredFieldsFilled()&&this.validateEmail(e)&&this.validatePassword(i)},validateRequiredFieldsFilled:function(){var t=this,e=!0;return this.schema.filter(function(t){return t.isRequired}).forEach(function(i){t.values[i.key]||(t.messages.push(["error",t.$i18n("feed.account.error.required",{field:i.label})]),e=!1)}),e},signupAction:function(){this.status=an.a.PENDING;var t=Object(St.d)(this.values);return this.$store.dispatch(n.Mc,t)},getId:function(t){return"vf-form-".concat(t)},getErrorMessage:function(t){return t.reason?t.reason:400===t.statusCode?this.$i18n("feed.account.error.signup"):this.$i18n("feed.account.error.login")},onSocialIconClick:function(t){this.status=an.a.PENDING,this.$store.dispatch(n.Lc,t)}},components:{vfForm:xs.a}};function Ys(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Ws,Js,Xs={template:Fs.a,props:{messages:{default:function(){return[]}}},data:function(){return{currentTab:"login",showAdditionalInfo:!1,tabs:[{name:"login",i18nKey:"feed.account.nav.login",ariaLabel:this.$i18n("feed.account.nav.login")},{name:"signup",i18nKey:"feed.account.nav.signup",ariaLabel:this.$i18n("feed.account.nav.signup")}]}},mounted:function(){this.$subscribe("svod-authentication","additional-information",this.onAdditionalInfo)},computed:function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),n.forEach(function(e){Ys(t,e,i[e])})}return t}({},Object(O.c)({registrationSchema:s.Hc,settings:s.yc}),{schema:function(){return this.registrationSchema()},classes:function(){return{"vf-svod-additional-info":this.showAdditionalInfo}},visibleTabs:function(){var t=this;return this.showAdditionalInfo?this.tabs.filter(function(e){return e.name===t.currentTab}):this.tabs},showTrayAuthentication:function(){return Ms(this.settings)}}),methods:{onAdditionalInfo:function(){this.showAdditionalInfo=!0},thirdpartyHeader:function(t){return this.showAdditionalInfo?this.$i18n("feed.additionalInfo.nav.thirdparty"):this.$i18n(t)},onTabChange:function(t){this.currentTab=t}},components:{vfTabbedNavigation:w.a,vfAccountBackdrop:$s,vfSvodThirdparty:Vs,vfSvodLoginForm:Gs,vfSvodSignupForm:Ks}},Zs=i(958),Qs=i.n(Zs),tr={beforeCreate:function(){this.AUTHENTICATION="auth",this.PALETTES=J.a},mounted:function(){var t=this;this.$subscribe("account","reset/failure",function(){t.isLoading=!1,t.messages=[["error",t.$i18n("feed.alerts.no_reset")]]})},data:function(){return{email:"",isLoading:!1,messages:[]}},computed:{classes:function(){return{"vf-forgot-password-reset-loading":this.isLoading,"vf-heading-bg-colour":this.isLoading}},backIcon:function(){return Qs.a},status:function(){return this.isLoading?an.a.PENDING:an.a.NONE}},methods:{onClick:function(){var t=this;this.isLoading=!0,this.errorKey="",setTimeout(function(){t.$publish("account","reset",t.email)},500)}},components:{vfStatus:Mn.a,loaderButton:Dn.a}},er=(i(959),Object(Q.a)(tr,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vf-forgot-password"},[i("form",{staticClass:"vf-flex-container vf-forgot-password-form"},[i("a",{staticClass:"vf-flex-container vf-forgot-password-back",attrs:{href:"#"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.$emit("view-switch",t.AUTHENTICATION)}}},[i("span",{domProps:{innerHTML:t._s(t.backIcon)}}),t._v(" "),i("span",{staticClass:"vf-forgot-password-back-message vf-primary-colour vf-primary-hoverable"},[t._v(t._s(t.$i18n("profile.back")))])]),t._v(" "),i("h1",{staticClass:"h2 vf-forgot-password-title"},[t._v("\n            "+t._s(t.$i18n("feed.account.forgot_password.title"))+"\n        ")]),t._v(" "),i("p",{staticClass:"vf-forgot-password-description"},[t._v("\n            "+t._s(t.$i18n("feed.account.forgot_password.description"))+"\n        ")]),t._v(" "),t._l(t.messages,function(t){return i("vf-status",{key:t[1],attrs:{level:t[0],text:t[1]}})}),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"vf-forgot-password-email vf-secondary-border-colour",attrs:{type:"email",placeholder:t.$i18n("feed.account.forgot_password.email")},domProps:{value:t.email},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.stopPropagation(),e.preventDefault(),t.onClick(e))},input:function(e){e.target.composing||(t.email=e.target.value)}}}),t._v(" "),i("loader-button",{staticClass:"vf-forgot-password__reset",class:t.classes,attrs:{palette:t.PALETTES.ACCENT,status:t.status,size:"large","is-cta":""},nativeOn:{click:function(e){return t.onClick(e)}}},[t._v("\n            "+t._s(t.$i18n("settings.controls.reset"))+"\n        ")])],2)])},[],!1,null,"73bd1222",null).exports),ir={extends:er,methods:{onClick:function(){this.errorKey="",this.isLoading=!0,this.$store.dispatch(n.Fc,this.email)}}};function nr(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var sr=(nr(Ws={},"fp",er),nr(Ws,"auth",Hs),Ws);sr.DEFAULT=sr.auth;var rr=(nr(Js={},"fp",ir),nr(Js,"auth",Xs),Js);rr.DEFAULT=rr.auth;var ar=W.extend({props:{tabOptions:Object},mounted:function(){var t=this;this.$subscribe("account","reset/success",function(e){t.messages=[["success",t.$i18n("feed.account.reset.success",{email:e})]],t.view=t.views.DEFAULT})},data:function(){var t=this.$store.getters[s.Ic](),e=t?rr:sr;return{isSvodEnabled:t,views:e,view:e.DEFAULT,messages:[]}},methods:{switchViews:function(t){this.view=this.views[t]}}}),or=Object(Q.a)(ar,function(){var t=this.$createElement;return(this._self._c||t)(this.view,{tag:"component",attrs:{messages:this.messages,"auth-method":this.tabOptions.authMethod},on:{"view-switch":this.switchViews}})},[],!1,null,null,null).exports,cr=i(433);i(960);i.d(e,"Widget",function(){return lr}),i.d(e,"vfTray",function(){return fr});var ur={DEFAULT:Le,PROFILE:Ti,COMMUNITY:nn,SETTINGS:Yn,SVOD_SETTINGS:ns,ACCOUNT:or},lr=l.a.extend({template:d.a,provide:function(){return{settings:this.settings,sectionTree:this.sectionTree}},data:function(){return{trigger:null,isOpen:!1,currentTab:b.DEFAULT,tabOptions:{},dataVfId:-1,profileUserId:null,subscriber_id:void 0}},computed:{isCurrentUserLoggedIn:function(){return Object(y.E)(this.currentUser)},currentUser:function(){return this.$store.getters[s.bb]},settings:function(){return this.$store.getters[s.yc]},sectionTree:function(){return this.$store.getters[s.xc]},languageClasses:function(){var t=this.$store.getters[s.kb].language;return"lang-".concat(t)}},methods:{onOpened:function(){this.$publish(r.z.CHANNEL,r.z.EVENTS.OPENED,this.currentTab)},onClosed:function(){this.$publish(r.z.CHANNEL,r.z.EVENTS.CLOSED),this.$store.dispatch(n.Rb),this.$store.dispatch(n.Sb)},open:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b.DEFAULT,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isOpen=!0,this.$publish(r.A.CHANNEL,r.A.EVENTS.CHANGE,e,i),this.$publish(r.E.CHANNEL,r.E.EVENTS.HIDE)},close:function(){this.isOpen=!1,this.$publish(r.E.CHANNEL,r.E.EVENTS.UNHIDE)},toggle:function(t){this.isOpen?this.$publish(r.z.CHANNEL,r.z.EVENTS.CLOSE):this.$publish(r.z.CHANNEL,r.z.EVENTS.OPEN,t)},openProfile:function(t,e){var i=this;return this.$store.dispatch(n.qc,{user:e}).then(function(e){var n=e.uuid;i.profileUserId=n||i.currentUser.uuid,i.$publish(r.z.CHANNEL,r.z.EVENTS.OPEN,t,b.PROFILE,{user_uuid:n})})},changeCurrentTab:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(function(t){return _.includes(t)})(t)||(t=b.DEFAULT),i.user_uuid=i.user_uuid||this.currentUser.uuid;var n=i.silent;switch(Object.keys(i).forEach(function(t){e.$set(e.tabOptions,t,i[t])}),t){case b.ACCOUNT:if(this.isCurrentUserLoggedIn)t=b.DEFAULT;else if(!Ms(this.settings))return;break;case b.COMMUNITY:this.isCurrentUserLoggedIn||n||this.$publish(r.a.CHANNEL,r.a.EVENTS.REQUIRED,{action:a.v});break;case b.PROFILE:Object(y.E)({uuid:i.user_uuid})||n||this.$publish(r.a.CHANNEL,r.a.EVENTS.REQUIRED,{action:a.w});break;case b.SETTINGS:if(!this.isCurrentUserLoggedIn)return}this.currentTab=t},viewForTab:function(t){switch(t){case b.DEFAULT:return ur.DEFAULT;case b.ACCOUNT:return ur.ACCOUNT;case b.COMMUNITY:return this.isCurrentUserLoggedIn?ur.COMMUNITY:ur.ACCOUNT;case b.PROFILE:return Object(y.E)({uuid:this.tabOptions.user_uuid})?ur.PROFILE:ur.ACCOUNT;case b.SETTINGS:return this.isCurrentUserLoggedIn?this.$store.getters[s.Ic]()?ur.SVOD_SETTINGS:ur.SETTINGS:ur.ACCOUNT}return ur.DEFAULT},trayLoaded:function(){this.$publish(r.D.CHANNEL,r.D.EVENTS.LOADED,this)},subscribeToNotifications:function(){this.currentUser.uuid!==c.a&&(this.subscriber_id=this.currentUser.uuid,this.rtSubscribe({section_uuid:[this.sectionTree.section_uuid],message_type:[o.b.NOTIFICATION],action:[o.a.NOTIFIED],recipient_uuid:[this.subscriber_id]},void 0,this.subscriber_id))},onRealtimeUserChange:function(){this.subscriber_id&&this.rtUnsubscribe(this.subscriber_id),this.subscribeToNotifications()}},mounted:function(){var t=this;this.profileUserId=this.currentUser.uuid,this.$subscribe(r.z.CHANNEL,r.z.EVENTS.CLOSE,this.close),this.$subscribe(r.A.CHANNEL,r.A.EVENTS.CHANGE,this.changeCurrentTab),this.$subscribe(r.z.CHANNEL,r.z.EVENTS.OPEN,this.open),this.$subscribe(r.z.CHANNEL,r.z.EVENTS.TOGGLE,this.toggle),this.$subscribe(r.q.CHANNEL,r.q.EVENTS.SHOW,this.openProfile),this.$subscribe(r.a.CHANNEL,r.a.EVENTS.REQUIRED,function(e){var i=e.trigger,n=e.method;return t.$publish(r.z.CHANNEL,r.z.EVENTS.OPEN,i,b.PROFILE,{silent:!0,authMethod:n})}),this.$subscribe(r.n.CHANNEL,r.n.EVENTS.SUCCESS,function(e){var i=e.uuid;t.profileUserId=i}),this.rtSubscribe({site_uuid:[this.settings.site_uuid],event_type:["tray.notification.broadcast"],topic_id:[""]}),this.$subscribe(r.B.CHANNEL,r.B.EVENTS.LOADED,function(){t.$publish("models/queue","fetch",t.$store)}),this.$subscribe(r.z.CHANNEL,r.z.EVENTS.OPEN,function(){window.localStorage.setItem("_vf_notification_queue_last_seen_".concat(t.currentUser.uuid),Date.now())}),this.trayLoaded(),this.$publish("models/queue","fetch",this.$store),this.$subscribe(r.B.CHANNEL,r.B.EVENTS.LOADED,this.onRealtimeUserChange),this.subscribeToNotifications()},components:{vfTrayNavigation:T,vfModerationStatus:q,FocusTrap:cr.FocusTrap}}),fr=lr},397:function(t,e,i){"use strict";i.d(e,"q",function(){return n}),i.d(e,"o",function(){return s}),i.d(e,"p",function(){return r}),i.d(e,"r",function(){return a}),i.d(e,"e",function(){return o}),i.d(e,"f",function(){return c}),i.d(e,"d",function(){return u}),i.d(e,"b",function(){return l}),i.d(e,"c",function(){return f}),i.d(e,"v",function(){return d}),i.d(e,"w",function(){return h}),i.d(e,"a",function(){return p}),i.d(e,"t",function(){return v}),i.d(e,"u",function(){return m}),i.d(e,"s",function(){return g}),i.d(e,"g",function(){return b}),i.d(e,"i",function(){return _}),i.d(e,"j",function(){return y}),i.d(e,"h",function(){return w}),i.d(e,"m",function(){return E}),i.d(e,"k",function(){return N}),i.d(e,"l",function(){return O}),i.d(e,"n",function(){return C});var n="livestory_like",s="livestory_dislike",r="livestory_flag",a="livestory_reply",o="comment_post",c="comment_upload_media",u="comment_like",l="comment_dislike",f="comment_flag",d="tray_community_click",h="tray_profile_click",p="avatar_follow_user",v="page_follow",m="page_rate",g="menu_follow_user",b="livechat_message",_="livechat_message_flag",y="livechat_message_like",w="livechat_message_dislike",E="livecomments_comment_like",N="livecomments_comment_disliked",O="livecomments_comment_flag",C="livecomments_follow"},407:function(t,e,i){"use strict";var n=i(390);i.d(e,"a",function(){return n.b})},411:function(t,e,i){"use strict";i(35),i(40);var n=i(0),s=i(263),r=i(48),a=i(2),o=i(413),c={props:{isClickable:{type:Boolean,default:!0},outline:{type:String,default:s.a.NONE},user:Object,size:String},computed:{currentUserUuid:function(){return this.$store.getters[n.bb].uuid}},methods:{onAvatarClick:function(t){var e=this,i=t.currentTarget;this.isClickable&&![r.c,r.a].includes(this.user.uuid)&&setTimeout(function(){return e.$publish(a.q.CHANNEL,a.q.EVENTS.SHOW,i,e.user)})}},components:{vfAvatar:o.a}},u=i(93),l=Object(u.a)(c,function(){var t=this,e=t.$createElement;return(t._self._c||e)("vf-avatar",{attrs:{user:t.user,current_user_uuid:t.currentUserUuid,size:t.size,"is-clickable":t.isClickable,"outline-palette":t.outline},nativeOn:{click:function(e){return t.onAvatarClick(e)}}})},[],!1,null,null,null);e.a=l.exports},416:function(t,e,i){"use strict";i.d(e,"a",function(){return n});var n={ERROR:"error",WARNING:"warning"}},424:function(t,e,i){"use strict";var n=i(20),s=i(210)(6),r="findIndex",a=!0;r in[]&&Array(1)[r](function(){a=!1}),n(n.P+n.F*a,"Array",{findIndex:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),i(99)(r)},425:function(t,e,i){"use strict";i.d(e,"a",function(){return d});var n,s=i(19),r=i.n(s),a=i(426),o=i.n(a),c=(i(427),i(416)),u=i(405);function l(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var f=(l(n={},c.a.ERROR,"vf-status-message-error"),l(n,c.a.WARNING,"vf-status-message-warning"),n),d=r.a.extend({template:o.a,props:["type"],methods:{getClasses:function(){return l({"vf-flex":!0,"vf-status-message":!0},f[this.type],!0)}},components:{vfExclamationMarkIcon:u.a}})},426:function(t,e){t.exports='<div class="vf-flex vf-status-message" :class=getClasses()> <div class="vf-status-message-triangle vf-status-message-triangle-upper"></div> <div class="vf-status-message-badge vf-flex"> <div class=icon> <vf-exclamation-mark-icon class="vf-status-message-icon vf-icon-medium"></vf-exclamation-mark-icon> </div> <slot name=vf-status-message-content></slot> </div> </div> '},427:function(t,e,i){},439:function(t,e,i){"use strict";i.d(e,"c",function(){return s}),i.d(e,"b",function(){return r}),i.d(e,"d",function(){return a}),i.d(e,"a",function(){return o});var n=i(11),s=function(t){return 1===t.anonymous},r=function(t,e){var i=e.enable_email_verification;return Object(n.E)(t)&&i&&!Object(n.H)(t.email_verification_status)},a=function(t,e){var i=e.enable_username_premoderation;return Object(n.E)(t)&&i&&!Object(n.H)(t.username_moderation_status)},o=function(t,e){var i=e.enable_avatar_premoderation;return Object(n.E)(t)&&i&&!Object(n.H)(t.avatar_moderation_status)}},442:function(t,e,i){},485:function(t,e,i){"use strict";i(5),i(7),i(17),i(105),i(566);var n=i(567),s=i.n(n),r=i(19),a=i.n(r),o=i(0),c=i(53),u=i(568),l=i.n(u),f=i(407).a.extend({data:function(){return{graphics:l.a}}}),d=i(66);function h(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}i.d(e,"a",function(){return v});var p=d.f*d.d*d.b,v=a.a.extend({template:s.a,props:{descriptor:{type:String,default:""},timestamp:{type:Number,default:0},hasClock:{type:Boolean,default:!0},formatAmPm:{type:Boolean,default:!1}},computed:function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),n.forEach(function(e){h(t,e,i[e])})}return t}({},Object(c.c)({getDateTimeFormat:o.lb,currentTime:o.ab,relativeTime:o.nc}),{iso:function(){return new Date(this.timestamp).toISOString()},relative:function(){return this.relativeTime(this.timestamp)},amPm:function(){return this.getDateTimeFormat(this.timestamp,{hour:"numeric",minute:"numeric",hour12:!0})},full:function(){var t=this.getDateTimeFormat(this.timestamp,{day:"numeric",month:"numeric",year:"numeric"}),e=this.getDateTimeFormat(this.timestamp,{hour:"numeric",minute:"numeric",second:"numeric",hour12:!0});return"".concat(e," -- ").concat(t)},displayedTime:function(){return this.formatAmPm&&this.lessThan12HoursAgo?this.amPm:this.relative},lessThan12HoursAgo:function(){return(this.currentTime-this.timestamp)/p<12}}),components:{vfClockIcon:f}})},488:function(t,e,i){"use strict";i(267)("link",function(t){return function(e){return t(this,"a","href",e)}})},551:function(t,e,i){"use strict";i(80);var n=i(0),s=i(501),r=i(2),a=i(751),o=i(599),c=i.n(o),u=i(390),l=Object(u.c)("bell_icon",c.a),f=i(391),d=i(46),h={clicked:d.i,loaded:d.j},p=function(t,e){var i=e.getters[n.yc].site_uuid;return t({post:{site_uuid:i,section_uuid:e.getters[n.xc].section_uuid},site_uuid:i}).catch(function(){})},v={props:{floating:{type:String,default:"false"}},created:function(){this.MAXIMUM_BEFORE_TRUNCATION=9},mounted:function(){var t,e=this;t=this.$store,p(h.loaded,t),this.$publish(r.E.CHANNEL,r.E.EVENTS.LOADED,this),this.$subscribe(r.E.CHANNEL,r.E.EVENTS.HIDE,function(){e.hidden=e.isFloating}),this.$subscribe(r.E.CHANNEL,r.E.EVENTS.UNHIDE,function(){setTimeout(function(){e.hidden=!1},250)})},data:function(){return{dataVfId:-1,hidden:!1}},computed:{countBadgeSize:function(){return this.isFloating?s.c.SMALL:s.c.TINY},isFloating:function(){return"true"===this.floating},currentUserUuid:function(){return this.$store.getters[n.cb]},count:function(){return this.$store.getters[n.dc](this.currentUserUuid).length},ariaCount:function(){return this.$i18n("aria.new_notifications",{num:this.count.toString()})},ariaLabel:function(){return this.$i18n("aria.open_tray")},classes:function(){return{"vf-tray-trigger":!0,"vf-offscreen-text":this.hidden,floating:this.isFloating,"vf-tray-trigger--floating":this.isFloating}},countClasses:function(){return{"vf-tray-count":!0,"vf-tray-count--floating":this.isFloating,"vf-tray-count--has-plus":this.count>9}}},methods:{toggle:function(){var t;t=this.$store,p(h.clicked,t),this.$publish(r.z.CHANNEL,r.z.EVENTS.TOGGLE,this.$el),this.$publish(r.E.CHANNEL,r.E.EVENTS.CLICKED)}},components:{roundCountBadge:a.a,vfBellIcon:l,vfButton:f.a}},m=(i(600),i(93)),g=Object(m.a)(v,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("vf-button",{class:t.classes,attrs:{"aria-label":t.ariaLabel,"data-vf-id":t.dataVfId},nativeOn:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.toggle(e)}}},[i("round-count-badge",{directives:[{name:"show",rawName:"v-show",value:t.count>0,expression:"count > 0"}],class:t.countClasses,attrs:{count:t.count,max:t.MAXIMUM_BEFORE_TRUNCATION,"aria-label":t.ariaCount,size:t.countBadgeSize}}),t._v(" "),i("vf-bell-icon",{staticClass:"vf-icon-medium"})],1)},[],!1,null,"796b9db6",null);e.a=g.exports},563:function(t,e,i){},566:function(t,e,i){},567:function(t,e){t.exports='<div class="timestamp vf-label vf-label-upper"> <vf-clock-icon v-if=hasClock class=vf-icon-small></vf-clock-icon> <span v-if=descriptor>{{ descriptor }}</span> <time :title=full :datetime=iso>{{ displayedTime }}</time> </div> '},568:function(t,e){t.exports='<path fill=currentColor fill-rule=evenodd d="M50.5 3C24.306 3 3 23.962 3 49.734c0 25.771 21.306 46.734 47.5 46.734S98 75.505 98 49.734C98 23.962 76.694 3 50.5 3zm0 5.498c23.184 0 41.912 18.426 41.912 41.236S73.684 90.97 50.5 90.97c-23.184 0-41.912-18.426-41.912-41.236S27.316 8.498 50.5 8.498zm0 10.996c-1.542 0-2.794 1.232-2.794 2.75v27.49c0 1.517 1.252 2.749 2.794 2.749h25.147c1.542 0 2.794-1.232 2.794-2.75 0-1.517-1.252-2.748-2.794-2.748H53.294V22.243c0-1.517-1.252-2.749-2.794-2.749z"/> '},569:function(t,e,i){},574:function(t,e,i){},575:function(t,e,i){},577:function(t,e,i){"use strict";i.d(e,"a",function(){return n});var n=function(t){return'<span class="vf-icon vf-icon-mod vf-icon-medium">'.concat(t,"</span>")}},578:function(t,e,i){},579:function(t,e,i){},589:function(t,e,i){},591:function(t,e,i){},593:function(t,e,i){},596:function(t,e,i){"use strict";i.d(e,"a",function(){return o});i(9);var n=i(14),s=i(0),r=i(4),a=i(42),o={load:function(t,e,i){var n=this;Promise.resolve(r.vuexStore.getInstance().getters[s.yc]).then(function(s){(i||s.enable_recaptcha)&&(n.callback=function(t){window.grecaptcha.reset(n.clientId),e(t)},n.getRecaptcha().then(n.render.bind(n,t)))})},execute:function(){window.grecaptcha.execute(this.clientId)},getRecaptcha:function(){return new Promise(function(t){return window.grecaptcha?t(window.grecaptcha):Object(a.c)("https://www.google.com/recaptcha/api.js?render=explicit").then(c).then(t)})},render:function(t){var e=r.vuexStore.getInstance().getters[s.yc].recaptcha_site_key||n.a.recaptcha_site_key;this.clientId=window.grecaptcha.render(t,{sitekey:e,callback:this.callback,size:"invisible",badge:"inline"})}};function c(){return new Promise(function(t){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;if((e-=u)<=0)return t();if(window.grecaptcha)return window.grecaptcha.ready(t);return setTimeout(function(){return c()},u)}(t)})}var u=50},597:function(t,e,i){},599:function(t,e){t.exports='<path fill=currentColor fill-rule=evenodd d="M50 3c7 0 13 3 18 7 4 5 7 11 8 18l5 28c2 7 5 10 9 12l3 3c1 1 2 2 2 5 0 2-2 5-5 5H10c-3 0-5-3-5-5 0-3 1-4 2-5l3-3c4-2 7-5 9-12l5-28c1-7 4-13 8-18 5-4 11-7 18-7zM36 83h28v1c0 8-6 14-14 14s-14-6-14-14v-1z"/> '},600:function(t,e,i){"use strict";var n=i(442);i.n(n).a},763:function(t,e,i){},764:function(t,e){t.exports='<path d="M7 13h6a3 3 0 0 0 3-3V3a3 3 0 0 0-3-3H3a3 3 0 0 0-3 3v7a3 3 0 0 0 3 3v1.7c0 1.3.7 1.6 1.6.7L7 13z" fill-rule=evenodd /> '},765:function(t,e){t.exports='<path d="M17 4.5C17 6 16.2 7 16.2 7l-1.7 1.9-5 4.8c-.6.5-1.4.5-2 0l-5-4.8-1.7-2S0 5.9 0 4.6C0 2 2.1 0 4.8 0 6 0 7.4.5 8.2 1.4l.1.1c.1.1.3.1.4 0v-.1C9.8.5 11 0 12.3 0 15 0 17 2 17 4.5z" fill-rule=evenodd /> '},766:function(t,e){t.exports='<path d="M0 14a3 3 0 0 1 3-3h8a3 3 0 0 1 3 3v3H0v-3zm7-6a4 4 0 1 0 0-8 4 4 0 0 0 0 8z" fill-rule=evenodd /> '},815:function(t,e){t.exports='<div class=vf-tray-wrapper :class=languageClasses> <transition :data-vf-id=dataVfId name=slide-in-right initial-focus=.vf-tray-close @after-enter=onOpened @after-leave=onClosed> <focus-trap v-show=isOpen class=vf-tray-slide-wrapper deactivate-on-outside-click deactivate-on-esc return-focus-on-deactivate :active=isOpen @deactivated=close> <div class=vf-tray> <vf-moderation-status/> <vf-tray-navigation :active-tab=currentTab :show-settings=isCurrentUserLoggedIn> <template v-slot:[currentTab]> <component class="vf-flex-grow js-tray-section vf-tray-component" :is=viewForTab(currentTab) :data-view-name=currentTab :tab-options=tabOptions /> </template> </vf-tray-navigation> </div> </focus-trap> </transition> </div> '},816:function(t,e,i){},822:function(t,e){t.exports='<div> <vf-tabbed-navigation :class=navigationClasses class="vf-tray-navigation vf-horiz-list" :initial-tab=activeTab :show-active=showActiveTab :tabs=tabs @tab-to=onTabChange full-width-nav> <template v-slot:nav-left> <vf-close-button class="vf-tray-close vf-tray-nav-button" size=vf-icon-small :aria-label=ariaLabels.closeTray @click.native=closeTray /> </template> <template v-slot:button=scope> <span v-if="scope.tab.name === \'vf-settings\'" class="vf-nav-label vf-tray-nav-button" :class=settingsClasses> <vf-cog-icon aria-hidden=true class=vf-icon-small /> </span> <span v-else aria-hidden=true class="vf-nav-label vf-flex-grow vf-tray-nav-button vf-tray-nav-button--no-padding"> {{ $i18n(scope.tab.i18nKey) }} </span> </template> <template v-for="tab in tabs" v-slot:[tab.name]> <slot :name=tab.name /> </template> </vf-tabbed-navigation> </div> '},835:function(t,e){t.exports="<section class=vf-notification-alert-section v-if=displayModeration role=alert> <ol class=vf-vert-list> <vf-moderation-alert :alert=alert></vf-moderation-alert> </ol> </section> "},836:function(t,e,i){},837:function(t,e){t.exports='<li class="vf-non-link vf-notification-alert vf-secondary-border-colour" :class=classes> <span aria-hidden=true class=vf-notification-alert__status-icon v-html=statusIcon></span> <span class=vf-alert-message v-if=alert.i18nKey>{{ $i18n(alert.i18nKey) }}</span> <vf-close-button v-if=showCloseButton class=vf-alert-close-btn size=vf-icon-small @click.native.prevent.stop=onCloseAlertClick> <span class=vf-offscreen-text>{{ $i18n("navigation.close_alert") }}</span> </vf-close-button> </li> '},838:function(t,e){t.exports='<svg class=vf-header-fill-colour width=20 height=20 xmlns=http://www.w3.org/2000/svg> <path d="M9.808 19.4c5.357 0 9.7-4.343 9.7-9.7 0-5.357-4.343-9.7-9.7-9.7-5.357 0-9.7 4.343-9.7 9.7 0 5.357 4.343 9.7 9.7 9.7zm5.127-13.335a.326.326 0 0 0-.461 0l-6.298 6.298L5.142 9.33a.326.326 0 1 0-.461.462l3.264 3.265a.326.326 0 0 0 .462 0l.004-.007.005-.003 6.52-6.52a.326.326 0 0 0 0-.461z" fill-rule=evenodd /> </svg> '},839:function(t,e){t.exports='<svg class=vf-header-fill-colour width=21 height=20 xmlns=http://www.w3.org/2000/svg> <path d="M10.108 20c5.523 0 10-4.477 10-10s-4.477-10-10-10-10 4.477-10 10 4.477 10 10 10zm.762-10l4.465-4.465a.538.538 0 1 0-.761-.762L10.108 9.24 5.643 4.773a.538.538 0 1 0-.762.762L9.347 10l-4.45 4.45a.539.539 0 0 0 .761.761l4.45-4.45 4.466 4.466a.537.537 0 0 0 .76 0c.211-.21.211-.551 0-.762L10.87 10z" fill-rule=evenodd /> </svg> '},840:function(t,e){t.exports='<svg class=vf-header-fill-colour width=20 height=20 xmlns=http://www.w3.org/2000/svg> <path d="M10.77 11.538a.769.769 0 1 1-1.54 0V5.385a.769.769 0 1 1 1.54 0v6.153zm-.224 3.624a.81.81 0 0 1-.546.223c-.2 0-.4-.085-.546-.223a.805.805 0 0 1-.223-.547c0-.2.084-.4.223-.546.292-.284.8-.284 1.084 0 .154.146.231.346.231.546 0 .2-.077.4-.223.547zM10 0C4.486 0 0 4.486 0 10s4.486 10 10 10 10-4.486 10-10S15.514 0 10 0z" fill-rule=evenodd /> </svg> '},841:function(t,e,i){"use strict";var n=i(563);i.n(n).a},842:function(t,e,i){},843:function(t,e){t.exports="<component :is=tag class=record> <div class=record__col> <slot name=identifier></slot> </div> <div class=record__col> <slot name=content></slot> <slot name=timestamp></slot> </div> <div class=record__col> <slot name=action></slot> </div> </component> "},853:function(t,e,i){"use strict";var n=i(569);i.n(n).a},859:function(t,e,i){"use strict";var n=i(574);i.n(n).a},860:function(t,e){t.exports='<path fill-rule=evenodd d="M20 6l-1 1v24H3l-1 1v53c0 5 4 10 10 10h76c6 0 10-5 10-10V7l-1-1H20zm2 2h74v77c0 4-4 7-8 7H18c2-2 4-4 4-7V8zm11 10l-1 2v17l1 1h24l2-1V20l-2-2H33zm1 3h22v15H34V21zm36 0a1 1 0 0 0 0 2h14a1 1 0 0 0 0-2H70zM4 33h15v52c0 4-3 7-7 7s-8-3-8-7V33zm66 0a1 1 0 0 0 0 3h14a1 1 0 0 0 0-3H70zM33 48a1 1 0 0 0 0 2h51a1 1 0 0 0 0-2H33zm0 13a1 1 0 0 0 0 3h51a1 1 0 0 0 0-3H33zm0 14a1 1 0 0 0 0 2h51a1 1 0 0 0 0-2H33z"/> '},861:function(t,e,i){"use strict";var n=i(575);i.n(n).a},862:function(t,e){t.exports='<g fill-rule=evenodd> <path d="M97 22H83V8 7h-1L50 22 19 7a1 1 0 0 0-2 1v14H4l-1 1v68l1 1h93l1-1V23l-1-1zm-77 1V10l30 14v65L20 75V23zm31 1l30-14v65L51 89V24zM6 24h12v15h-5a1 1 0 0 0 0 2h5v15h-5l-1 1 1 1h5v15h-5a1 1 0 0 0 0 2h5v1h1l28 14H6V24zm89 66H53l29-14v-1h6a1 1 0 0 0 0-2h-6V58h6a1 1 0 0 0 0-2h-6V41h6a1 1 0 0 0 0-2h-6V24h13v66z"/> <path d="M24 29l18 9h1v-1-1l-18-8h-1v1zm19 24l-18-8h-1v1l18 8h1v-1zm0 17l-18-9-1 1v1l18 8h1v-1zm14-32l18-9v-1h-1l-18 8a1 1 0 0 0 1 2zm17 7l-18 8a1 1 0 0 0 1 1l18-8v-1h-1zm0 16l-18 9v1h1l18-8v-1l-1-1z"/> </g> '},865:function(t,e){t.exports='<path fill-rule=evenodd d="M95 50c-2-3-3-7-1-11v-8c-1-2-3-4-6-5-4-1-7-4-7-8-1-3-2-6-5-7-2-2-5-2-8-1-4 1-8 0-10-3a9 9 0 0 0-15 0c-2 3-6 4-10 3-3-1-6-1-8 1-3 1-4 4-5 7 0 4-3 7-7 8-3 1-5 3-6 5v8c2 4 1 8-1 11a9 9 0 0 0 2 15c3 2 5 6 4 10 0 3 0 6 2 8s5 3 8 3c4 0 8 2 9 6a9 9 0 0 0 14 4c3-2 8-2 11 0a9 9 0 0 0 14-4c1-4 5-6 9-6 3 0 6-1 8-3s2-5 2-8c-1-4 1-8 4-10a9 9 0 0 0 2-15zM44 64l2 2 2-2 25-24-5-5-22 22-13-13-5 5 16 15z"/> '},866:function(t,e,i){},867:function(t,e,i){"use strict";var n=i(578);i.n(n).a},868:function(t,e){t.exports='<transition name=fade> <notification-list-item clickable :status=status> <vf-record class="feed link" tag=a :href=page.url @click.native.stop.prevent=onClick> <template v-slot:identifier> <topic-icon :type=topicType /> </template> <template v-slot:content> <p class=vf-secondary-text-colour> <topic-description :type=topicType :description=name /> </p> <p class=vf-notification__main>{{ page.title }}</p> </template> <template v-slot:action> <img v-if=hasImage class="vf-image vf-image-medium vf-article-thumbnail" :src=page.image_url :alt=page.alt @error=onImageError /> <vf-delete-button class=vf-delete-icon text="" @click.native.stop.prevent=deleteNotification /> </template> <template v-slot:timestamp> <vf-timestamp :timestamp=timestamp /> </template> </vf-record> </notification-list-item>> </transition> '},869:function(t,e,i){},870:function(t,e,i){"use strict";var n=i(579);i.n(n).a},871:function(t,e,i){},872:function(t,e){t.exports='<transition name=slideout> <div v-if=promptOptIn class="vf-notification-opt-in vf-secondary-text-colour" :class=classes> <vf-close-button v-show=promptOptIn class=vf-close-opt-in size=vf-icon-small :aria-label=text.close @click.native.stop.prevent=dismiss></vf-close-button> <h2>{{ text.header }}</h2> <p>{{ text.description }}</p> <div class=vf-opt-in-link-container> <a v-show=promptOptIn aria-describedby=vf-opt-in-link-desc class="vf-button vf-opt-in-link vf-primary-bg-colour vf-primary-text-colour" href=# @click.stop.prevent=subscribe> {{ text.link }} </a> <em class=vf-offscreen-text id=vf-opt-in-link-desc> {{ text.linkDescription }} </em> <strong aria-role=polite class="vf-opt-in-status vf-offscreen-text"> {{ text.status }} </strong> </div> </div> </transition> '},873:function(t,e,i){},874:function(t,e){t.exports="<div class=vf-user-profile> <vf-profile-header :user=user></vf-profile-header> <vf-profile-user-details class=vf-user-profile__details :user=user v-if=isVisibleToCurrentUser></vf-profile-user-details> <vf-profile-overview :user=user></vf-profile-overview> <vf-profile-activity :user=user :is-current-user=isCurrentUser></vf-profile-activity> </div> "},875:function(t,e,i){},876:function(t,e){t.exports='<div class="vf-flex vf-centered vf-profile-header vf-tray-header-backdrop vf-profile-backdrop"> <h2>{{ displayName }}</h2> <div class="vf-flex-vert vf-split-list"> <vf-avatar class=vf-profile-header__avatar v-bind=avatarProps></vf-avatar> <vf-mute-action-button v-if=showMuteButton class="vf-profile-header__mute-button vf-primary-text-colour vf-button-full" :model=user></vf-mute-action-button> </div> </div> '},877:function(t,e){t.exports='<section class=vf-profile-overview> <ul class="vf-counts-list vf-horiz-list"> <vf-profile-count v-for="count in counts" :count=count :key=count.name></vf-profile-count> </ul> </section> '},878:function(t,e){t.exports='<li class="vf-flex vf-centered"> <a class="vf-flex vf-centered labelled-icon" href=# @click.stop.prevent=onClick v-if=count.hasClickEvent> <component :is=getIconName class="vf-overview-icon vf-overview-link"></component> <strong class="vf-label vf-label-upper vf-primary-hoverable">{{ count.text }}</strong> </a> <div class="vf-flex vf-centered labelled-icon" v-else> <component :is=getIconName class=vf-overview-icon></component> <strong class="vf-label vf-label-upper vf-primary-hoverable">{{ count.text }}</strong> </div> </li> '},879:function(t,e,i){},880:function(t,e){t.exports='<section> <h3 class=vf-offscreen-text id=vf-tray__comment_history>{{ $i18n(\'profile.user_actions.comment_history\') }}</h3> <ol aria-labelledby=vf-tray__comment_history v-if="comments.length > 0"> <vf-action v-for="comment in comments" :key=comment.uuid :action=comment :name=name></vf-action> </ol> <p class=vf-none v-else> {{ emptyMessage }} </p> </section> '},881:function(t,e){t.exports='<li> <vf-record class=profile tag=a :href=deepLinkedUrl> <template v-slot:content> <p class=vf-secondary-text-colour> {{ title }} <em class="vf-article-title vf-primary-colour"> {{ page.title }}: </em> <vf-activity-content-alert :type=getActivityAlertType :name=name v-if=getActivityAlertType /> </p> <p v-if="text.length > 0" class=vf-secondary-text-colour> "{{ text }}" </p> <vf-media-gallery :media=media /> </template> <template v-slot:timestamp> <vf-timestamp :timestamp=timestamp /> </template> </vf-record> </li> '},882:function(t,e){t.exports="<p :class=classes> <vf-exclamation-mark-icon class=vf-icon-medium></vf-exclamation-mark-icon> <span>{{ content }}</span> </p> "},883:function(t,e){t.exports='<ul :class=classes v-if="media.length > 0"> <li v-for="(mediaItem, idx) in visibleMedia" v-if=mediaItem class=vf-media-gallery-item :key=mediaItem.id> <vf-media-thumbnail class="" :media=mediaItem></vf-media-thumbnail> <span v-if="count(idx) > 0" class="vf-js-anchor vf-gallery-link vf-flex vf-centered vf-li">+{{ count(idx) }}</span> </li> </ul> '},884:function(t,e){t.exports="<vf-image v-bind=vfImageData> <vf-processing-icon v-if=isLoading circle=outline></vf-processing-icon> <span v-if=isLoading class=\"vf-label vf-label-heavy vf-label-upper vf-visibly-hidden-on-mobile\">{{ $i18n('media.processing') }}</span> </vf-image> "},885:function(t,e,i){},886:function(t,e){t.exports='<path d="M89 50c0-15-9-29-23-36a3 3 0 1 0-3 6c12 6 19 17 19 30 0 17-12 31-28 34a3 3 0 1 0-5-5l-6 7a3 3 0 0 0 1 4l6 6 2 1 2-1v-5l-1-1c20-2 36-19 36-40zM43 22a3 3 0 0 0 5-1l5-6v-5l-7-5c-1-1-3-1-4 1v4a40 40 0 0 0-12 76l1 1a3 3 0 0 0 2-6 34 34 0 0 1 11-64h-1v5z"/> '},887:function(t,e,i){},888:function(t,e){t.exports='<vf-container class="user-details vf-container--narrow" :title=title :expandable=true :expanded=expanded :button-a11y-description=a11yDescription @click=onExpandCollapse> <vf-table :columns=columns :rows=rows class=user-details__table></vf-table> <span class=user-details__footer>{{footerText}}</span> </vf-container> '},898:function(t,e,i){},899:function(t,e){t.exports='<div class=vf-community-content> <section class=vf-notification-alert-section role=alert> <ol class=vf-vert-list> <component v-for="alert in alerts" :key=alert.key :is=getAlertComponentName(alert.status) :alert=alert></component> </ol> </section> <vf-tabbed-navigation class=vf-tabbed-subnav :tabs=headers :initial-tab=communityTab @tab-to=changeTab full-width-nav> <template v-slot:button="{ tab }"> <span class=vf-nav-label> {{ tab.count }} {{ $i18n(tab.i18nKey, {count: tab.count }) }} </span> </template> <template v-slot:[communityTab]> <vf-community-suggestions v-if=showTopList :suggestions=topUsers /> <div class=vf-none v-if=showEmpty()> {{ $i18n(getEmptyCommunityTabText(communityTab)) }} </div> <vf-community-items v-else :tab=communityTab :items=getCommunityList() @focus-current-tab=focusCurrentTab /> </template> <p class=vf-none v-if=!showCommunity> {{ $i18n("community.empty") }} </p> </vf-tabbed-navigation> </div> '},900:function(t,e){t.exports='<ol> <component v-for="(model, idx) in models" ref=items :is=tab :key=model.uuid :model=model tabindex=0 @unfollow=focusNearest(idx)></component> </ol> '},901:function(t,e){t.exports="<li> <vf-record class=community> <template v-slot:identifier> <vf-avatar v-bind=avatarProps @click.native.stop.prevent=toggleOtherUserProfile /> </template> <template v-slot:content> <p class=vf-secondary-text-colour> {{ model.name }} </p> </template> <template v-slot:timestamp> <vf-timestamp :timestamp=timestamp :descriptor=descriptor /> </template> <template v-slot:action> <vf-community-action-button class=vf-community-action :model=model /> </template> </vf-record> </li> "},902:function(t,e,i){},903:function(t,e){t.exports='<li> <vf-record class=community :class=getClientClass> <template v-slot:identifier> <vf-avatar v-if=isUser class=community__identifier--user v-bind=avatarProps @click.native.stop.prevent=onAvatarClick /> <vf-topic-icon v-else-if=isTopic class="community__identifier--topic vf-image-small"/> <vf-author-icon v-else-if=isAuthor class="community__identifier--author vf-image-small"/> </template> <template v-slot:content> <p class="vf-secondary-text-colour title"> <span>{{ model.title }}</span> <vf-badge v-if=!isUser class="vf-following-item__badge vf-badge__small" status=charcoal> {{ model.type }} </vf-badge> </p> </template> <template v-slot:timestamp> <vf-timestamp :timestamp=model.timestamp :descriptor=descriptor /> </template> <template v-slot:action> <vf-dismiss text-key=user_actions.unfollow @dismiss=onDismissClick /> </template> </vf-record> </li> '},904:function(t,e){t.exports='<vf-close-button class="vf-dismiss vf-label" size=vf-icon-small @click.native.stop.prevent="$emit(\'dismiss\')"> <span class=vf-hover-text>{{ $i18n(textKey) }}</span> </vf-close-button> '},905:function(t,e){t.exports="<div class=vf-community-suggestions> <div class=vf-header-box> <p class=vf-label> {{ $i18n('community.following_description') }} </p> <p class=vf-label> {{ $i18n('community.suggest_follow') }} </p> </div> <vf-record class=community> <template v-slot:identifier> <div class=\"vf-tray-section-header vf-label vf-label-upper\"> {{ $i18n('community.suggestion_header') }} </div> </template> </vf-record> <vf-community-items tab=suggestions :items=suggestions /> </div> "},906:function(t,e){t.exports='<div class="vf-settings vf-vert-spaced"> <h1 v-if="canUpdateAvatar || canUpdateName" class="vf-client-settings-form-profile-header vf-label vf-label-upper vf-setting-module__title"> {{ $i18n(\'settings.update.profile\') }} </h1> <vf-avatar-upload v-if="canUpdateAvatar && isLoggedIn" :user=user @clear-messages=clearMessages @avatar-message=addStatusMessage @avatar-api-error=addApiError></vf-avatar-upload> <section role=group class=vf-client-settings-form-section> <form class="vf-vert-spaced vf-client-settings-form" @keydown.enter.stop.prevent=tryUpdateProfile> <vf-input-list v-if=isLoggedIn class="vf-vert-spaced vf-client-settings-form-profile" :schema=baseSchema :values=values @update=updateValue> </vf-input-list> <vf-update-password v-if=canUpdatePassword @password-input="update_password = $event" @password-verify-input="update_password_verify = $event"> </vf-update-password> <vf-verify-password v-if=showCurrentPassword @password-input="current_password = $event"> </vf-verify-password> </form> </section> <vf-toggle-settings @toggle=onToggle></vf-toggle-settings> <vf-settings-controls @try-update-profile=tryUpdateProfile @logout-clicked=onLogout :messages=messages :can-update-profile=canUpdateProfile :status=status> </vf-settings-controls> </div> '},927:function(t,e,i){},928:function(t,e){t.exports='<section class="vf-vert-spaced vf-client-settings-notification-section"> <h1 v-if=showHeader class="vf-label vf-label-upper vf-client-settings-notification-header vf-setting-module__title">{{ text.header }}</h1> <ul class="vf-flex-vert vf-vert-spaced vf-notification-list vf-client-settings-notification-list"> <vf-toggle-input v-if=canUpdateBrowserNotifications :setting=browserNotificationsSetting @toggle=toggleBrowserNotifications class=vf-client-settings-browser-notifications> <div v-html=browserIcon></div> <span>{{ $i18n(\'settings.controls.browser_notifications\') }}</span> </vf-toggle-input> <transition name=fade> <li v-if=browserNotificationMessage.messageKey> <vf-status-message :type=browserNotificationMessage.type> <template v-slot:vf-status-message-content> <div> {{ $i18n(browserNotificationMessage.messageKey) }} <span v-if=browserNotificationMessage.hasLink> -- <a class=vf-status-message-link @click.stop.prevent=onErrorLinkClick> {{ $i18n(browserNotificationMessage.messageKey + "_link") }} </a> </span> </div> </template> </vf-status-message> </li> </transition> <vf-toggle-input v-if=canUpdateEmailNotifications :setting=updateEmailNotificationsSetting @toggle=toggleEmailNotifications class=vf-client-settings-email-notifications> <div v-html=emailIcon></div> <span>{{ $i18n(\'settings.controls.email_notifications\') }}</span> </vf-toggle-input> </ul> </section> '},929:function(t,e){t.exports='<svg xmlns=http://www.w3.org/2000/svg width=20 height=20 viewBox="0 0 100 100"> <title>Push Notification Icon</title> <desc>Push Notification Icon</desc> <path fill=#000000 fill-rule=evenodd d="M83.9992,32.0016001 C75.7247587,32.0016001 68.9983999,25.2752413 68.9983999,17.0008 C68.9983999,8.72635874 75.7247587,2 83.9992,2 C92.2736413,2 99,8.72635874 99,17.0008 C99,25.2752413 92.2736413,32.0016001 83.9992,32.0016001 Z M83.9992,9.50040002 C79.8649795,9.50040002 76.4987999,12.8665796 76.4987999,17.0008 C76.4987999,21.1350205 79.8649795,24.5012001 83.9992,24.5012001 C88.1334204,24.5012001 91.4996,21.1350205 91.4996,17.0008 C91.4996,12.8665796 88.1334204,9.50040002 83.9992,9.50040002 Z M75.9083684,92.0048003 L24.5912315,92.0048003 C15.993973,92.0048003 9,85.0108272 9,76.4135687 L9,25.0964318 C9,16.4991733 15.993973,9.50520028 24.5912315,9.50520028 L61.5028001,9.50520028 C63.5741106,9.50520028 65.2530002,11.1828898 65.2530002,13.2554003 C65.2530002,15.3267108 63.5741106,17.0056003 61.5028001,17.0056003 L24.5912315,17.0056003 C20.1281935,17.0056003 16.5004,20.6333938 16.5004,25.0964318 L16.5004,76.4135687 C16.5004,80.8766068 20.1281935,84.5044002 24.5912315,84.5044002 L75.9083684,84.5044002 C80.3714065,84.5044002 83.9992,80.8766068 83.9992,76.4135687 L83.9992,39.5020001 C83.9992,37.4294896 85.6768894,35.7518001 87.7494,35.7518001 C89.8219105,35.7518001 91.4996,37.4294896 91.4996,39.5020001 L91.4996,76.4135687 C91.4996,85.0108272 84.505627,92.0048003 75.9083684,92.0048003 Z"/> </svg> '},930:function(t,e){t.exports='<?xml version="1.0" encoding="UTF-8" standalone="no"?> <svg width=18px height=13px viewBox="0 0 18 13" version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink> <title>Email Notification Icon</title> <desc>Icon of an envelope</desc> <g id=Final stroke=none stroke-width=1 fill=none fill-rule=evenodd> <g id=Settings transform="translate(-1490.000000, -797.000000)" fill=#FFAD7C> <path d="M1490.02969,798.656481 C1490.01017,798.768963 1490,798.884668 1490,799.00276 L1490,807.99724 C1490,809.106457 1490.89323,810 1491.99509,810 L1506.00491,810 C1507.10738,810 1508,809.103334 1508,807.99724 L1508,799.00276 C1508,798.77408 1507.96203,798.554568 1507.8921,798.350161 L1499.60357,804.789681 L1499.00683,805.253298 L1498.39789,804.805823 L1490.02969,798.656481 Z M1491.31521,797.119207 C1491.52737,797.042063 1491.75631,797 1491.99509,797 L1506.00491,797 C1506.11737,797 1506.22766,797.009308 1506.33504,797.027203 L1498.37653,803.210319 L1499.58221,803.194177 L1491.31521,797.119207 Z" id=Email_Icon></path> </g> </g> </svg>'},931:function(t,e,i){"use strict";var n=i(589);i.n(n).a},933:function(t,e,i){"use strict";var n=i(591);i.n(n).a},934:function(t,e,i){},935:function(t,e){t.exports='<div class="vf-settings vf-vert-spaced"> <h1 v-if="canUpdateAvatar || canUpdateName" class="vf-client-settings-form-profile-header vf-label vf-label-upper vf-setting-module__title"> {{ $i18n(\'settings.update.profile\') }} </h1> <vf-avatar-upload v-if="canUpdateAvatar && isLoggedIn" :user=user @clear-messages=clearMessages @avatar-message=addStatusMessage @avatar-api-error=addApiError></vf-avatar-upload> <section role=group class=vf-client-settings-form-section> <form class="vf-vert-spaced vf-client-settings-form" @keydown.enter.stop.prevent=tryUpdateProfile> <vf-input-list v-if=isLoggedIn class="vf-vert-spaced vf-client-settings-form-profile" :schema=schema :values=values @update=updateValue> </vf-input-list> <vf-update-password v-if=canChangePassword @password-input="update_password = $event" @password-verify-input="update_password_verify = $event"> </vf-update-password> <vf-verify-password v-if=showCurrentPassword @password-input="current_password = $event"> </vf-verify-password> </form> </section> <vf-toggle-settings @toggle=onToggle></vf-toggle-settings> <vf-settings-controls @try-update-profile=tryUpdateProfile @logout-clicked=onLogout :messages=messages :can-update-profile=canUpdateProfile :status=status> </vf-settings-controls> </div> '},936:function(t,e,i){},937:function(t,e){t.exports="<div class=\"vf-account vf-empty-bg-colour\" v-if=showTrayAuthentication> <h2 class=vf-offscreen-text>{{ $i18n('tray.authentication.aria.header') }}</h2> <p class=vf-offscreen-text>{{ $i18n('tray.authentication.aria.description') }}</p> <vf-account-backdrop/> <vf-tabbed-navigation :tabs=tabs :initial-tab=authMethod full-width-nav> <template v-slot:button=\"{ tab }\"> <span class=vf-nav-label>{{ $i18n(tab.i18nKey) }}</span> </template> <template v-slot:login> <h3 class=vf-account-header-text>{{ $i18n('feed.login.nav.thirdparty') }}</h3> <vf-thirdparty-icons class=vf-accent-fill-colour :aria-header-text=\"$i18n('tray.authentication.login.aria.social')\"/> <vf-login-form :parent-messages=messages @view-switch=\"$emit('view-switch', $event)\"/> </template> <template v-slot:signup> <h3 class=vf-account-header-text>{{ $i18n('feed.signup.nav.thirdparty') }}</h3> <vf-thirdparty-icons class=vf-accent-fill-colour :aria-header-text=\"$i18n('tray.authentication.signup.aria.social')\"/> <vf-signup-form :parent-messages=messages /> </template> </vf-tabbed-navigation> </div> "},938:function(t,e){t.exports='<section class="vf-account-thirdparty vf-relative" v-if="loginList.length > 0"> <h4 class=vf-offscreen-text>{{ ariaHeaderText }}</h4> <ul class="vf-account-thirdparty-controls vf-social-logins vf-flex-container"> <vf-thirdparty-service class=vf-thirdparty-control v-for="login in loginList" :key=login.provider :login=login> </vf-thirdparty-service> </ul> <input id=vf-show-more-social-logins-id type=checkbox /> <ul class="vf-account-thirdparty-controls vf-flex-container vf-social-logins vf-more-logins"> <vf-thirdparty-service v-for="login in showMoreList" :key=login.provider :login=login> </vf-thirdparty-service> </ul> <label class=vf-show-more-social-logins @click=toggleText for=vf-show-more-social-logins-id v-if="showMoreList.length > 0">{{showMore}}</label> </section> '},939:function(t,e,i){"use strict";var n=i(593);i.n(n).a},950:function(t,e,i){},951:function(t,e){t.exports='<div class="vf-account-nav-backdrop vf-tray-header-backdrop"> <sign-up-illustration class=vf-account-nav-illustration /> </div> '},952:function(t,e){t.exports='<path fill-rule=evenodd d="M93.4 39.8c-1.7-2-4.2-3-7.4-3a1 1 0 0 0-.5 0v.1l-.2.1s-1.5 1.4-3.9 1.4a5.9 5.9 0 0 1-3.9-1.4h-.1a.4.4 0 0 0-.1-.1 1 1 0 0 0-.5-.2c-3.2 0-5.7 1-7.4 3.1-3.7 4.3-2.8 11.3-2.7 11.6a1 1 0 0 0 1 .9H95a1 1 0 0 0 1-.9c0-.3 1-7.3-2.7-11.6zm-12 .6c1 0 1.7-.2 2.4-.4l-2.4 5-2.4-5a8.1 8.1 0 0 0 2.4.4zm12.9 10H68.5c0-2 0-6.5 2.3-9.3 1.3-1.5 3.1-2.3 5.4-2.4l4.3 9a1 1 0 0 0 1.8 0l4.3-9c2.3.1 4.1 1 5.4 2.4 2.4 2.8 2.4 7.3 2.3 9.2zM81.4 35.4a8.2 8.2 0 1 0 0-16.3 8.2 8.2 0 0 0 0 16.3zm0-14.3a6.2 6.2 0 0 1 6.2 6.2 6.2 6.2 0 0 1-6.2 6.2 6.2 6.2 0 0 1-6.2-6.2 6.2 6.2 0 0 1 6.2-6.2zm-62 15.5a1 1 0 0 0-.4.2h-.1l-.1.1c-.1 0-1.5 1.4-4 1.4A5.9 5.9 0 0 1 11 37h-.2a.4.4 0 0 0 0-.1 1 1 0 0 0-.5-.2c-3.2 0-5.7 1-7.5 3.1C-.9 44.1.1 51.1.1 51.4a1 1 0 0 0 1 .9h27.5a1 1 0 0 0 1-.9c0-.3 1-7.3-2.7-11.6-1.8-2-4.3-3-7.5-3zM15 40.4c.9 0 1.7-.2 2.3-.4L15 45l-2.4-5a8.1 8.1 0 0 0 2.4.4zm12.8 10H2c-.1-2-.1-6.5 2.3-9.3 1.3-1.5 3-2.3 5.4-2.4l4.3 9c.3.6 1.4.6 1.7 0l4.3-9c2.3.1 4.1 1 5.4 2.4 2.4 2.8 2.4 7.3 2.3 9.2zM14.9 35.4a8.2 8.2 0 1 0 0-16.3 8.2 8.2 0 0 0 0 16.3zm0-14.3a6.2 6.2 0 0 1 6.1 6.2 6.2 6.2 0 0 1-6.1 6.2 6.2 6.2 0 0 1-6.2-6.2 6.2 6.2 0 0 1 6.2-6.2zm55 5.2a1 1 0 0 0 .9-.5 1 1 0 0 0 0-1l-2.7-5.2a14.7 14.7 0 0 0 .7-7.4 14.7 14.7 0 0 0-6-9.5 14.6 14.6 0 0 0-11-2.6 14.8 14.8 0 0 0-9 23.8c-1 .2-1.9.6-2.8 1a14.7 14.7 0 0 0-6 5.4l-5.8 1.2a1 1 0 0 0-.5 1.7 128 128 0 0 1 4.1 4.2 14.7 14.7 0 0 0 1.5 7.2c2.5 5.1 7.5 8.3 13.2 8.3a14.6 14.6 0 0 0 6.5-1.5A14.8 14.8 0 0 0 58 29c2.2-.6 4.2-1.6 6-3.2l5.9.6zM58 32.6A12.8 12.8 0 0 1 35 44a12.8 12.8 0 0 1-1.2-6.6c0-.5 0-.6-3.5-4.1l4.4-1c.3 0 .6-.1.8-.4a12.7 12.7 0 0 1 5.4-5 12.7 12.7 0 0 1 5.6-1.4c5 0 9.3 2.8 11.5 7.2zm5-8.5a12.7 12.7 0 0 1-6.6 3.2 14.6 14.6 0 0 0-9.9-3.8H45A12.8 12.8 0 0 1 61.7 4.4a12.7 12.7 0 0 1 5.1 8.3 12.8 12.8 0 0 1-.7 6.7c-.1.4-.2.6 2.2 5l-4.5-.5a1 1 0 0 0-.9.3zm-8.8 10h-3v-1.5a3.9 3.9 0 0 0-1.5-2.8 2.4 2.4 0 0 0-2-.3c-1.5.4-1.4 2.2-1.4 3.3v.4c0 1-1 1.7-1.7 2.1h-5.8a1 1 0 0 0-.8.4c-.2.3-.5.7.5 8.1a1 1 0 0 0 1 .8h4.9a1 1 0 0 0 .9-.5l.3.1.4.1H52c1.3 0 2.1-.3 2.5-1 .2-.6.1-1 0-1.5.4-.4.6-.9.6-1.2v-.8a2.1 2.1 0 0 0 .4-.9 2.2 2.2 0 0 0 0-1 2 2 0 0 0 1-1.6c0-1.1-.8-2.2-2.4-2.2zm-11 8.6h-2.9c-.3-2.1-.5-4.3-.5-5.5H43v5.5zm11-6.2a1 1 0 0 0-.7.5 1 1 0 0 0 0 1c.2 0 .2.3.2.4l-.3.2a1 1 0 0 0-.5.7 1 1 0 0 0 .3.9.4.4 0 0 1 0 .2l-.3.3a1 1 0 0 0-.5.7c0 .2 0 .5.2.7l.1.2a3 3 0 0 1-.6 0h-6l-.7-.3a1 1 0 0 0-.3 0v-4.7c2-1 3.2-2.5 3.2-4.1v-.5-1.4l.3.1c.3.3.6.8.7 1.4 0 .9-.4 1.7-.4 1.8a1 1 0 0 0 0 1 1 1 0 0 0 .8.4h4.5c.4 0 .4.1.4.2l-.4.3zM49 13a1.5 1.5 0 0 0 0 3 1.5 1.5 0 0 0 0-3zm5.4 0a1.5 1.5 0 0 0 0 3 1.5 1.5 0 0 0 0-3zm5.2 0a1.5 1.5 0 0 0 0 3 1.5 1.5 0 0 0 0-3z"/> '},953:function(t,e){t.exports="<svg :class=getClasses :viewBox=viewBox xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink version=1.1> <defs v-html=defs></defs> <circle cx=50% cy=50% r=47% class=vf-icon-inner-circle></circle> <g v-html=getGraphics :transform=getTransform></g> </svg> "},955:function(t,e,i){},956:function(t,e){t.exports="<div class=\"vf-account vf-empty-bg-colour\" v-if=showTrayAuthentication> <h2 class=vf-offscreen-text>{{ $i18n('tray.authentication.aria.header') }}</h2> <p class=vf-offscreen-text>{{ $i18n('tray.authentication.aria.description') }}</p> <vf-account-backdrop/> <vf-tabbed-navigation full-width-nav :tabs=visibleTabs :initial-tab=currentTab @tab-to=onTabChange> <template v-slot:button=\"{ tab }\"> <span class=vf-nav-label>{{ $i18n(tab.i18nKey) }}</span> </template> <template v-slot:login> <vf-svod-thirdparty class=vf-accent-fill-colour :class=classes :header-text=\"thirdpartyHeader('feed.login.nav.thirdparty')\"/> <vf-svod-login-form v-if=!showAdditionalInfo :lr-schema=schema :parent-messages=messages @view-switch=\"$emit('view-switch', $event)\"/> </template> <template v-slot:signup> <vf-svod-thirdparty class=vf-accent-fill-colour :class=classes :header-text=\"thirdpartyHeader('feed.signup.nav.thirdparty')\"/> <vf-svod-signup-form v-if=!showAdditionalInfo :lr-schema=schema :parent-messages=messages /> </template> </vf-tabbed-navigation> </div> "},957:function(t,e){t.exports="<vf-form v-if=settings.authprovider_viafoura_enabled id=vf-signup-form :schema=schema :status=status :messages=messages :button-text=labels.signup @form-submit=signup> <div id=vf-signup-g-recaptcha-submit class=vf-signup-recaptcha></div> </vf-form> "},958:function(t,e){t.exports='<svg width=6 height=11 xmlns=http://www.w3.org/2000/svg> <path d="M5.3.1l.7.7-1.5 1.6-3 3.1L6 10.2l-.7.7L0 5.5 5.3.1" fill=none fill-rule=evenodd /> </svg> '},959:function(t,e,i){"use strict";var n=i(597);i.n(n).a},960:function(t,e,i){}}]);